{"remainingRequest":"D:\\代码\\del_demo\\VisualizationExcle_Demo\\node_modules\\babel-loader\\lib\\index.js!D:\\代码\\del_demo\\VisualizationExcle_Demo\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\代码\\del_demo\\VisualizationExcle_Demo\\src\\components\\x-spreadsheet\\component\\form_select.js","dependencies":[{"path":"D:\\代码\\del_demo\\VisualizationExcle_Demo\\src\\components\\x-spreadsheet\\component\\form_select.js","mtime":1614915429338},{"path":"D:\\代码\\del_demo\\VisualizationExcle_Demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1596536485880},{"path":"D:\\代码\\del_demo\\VisualizationExcle_Demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1606828682259},{"path":"D:\\代码\\del_demo\\VisualizationExcle_Demo\\node_modules\\eslint-loader\\index.js","mtime":1603719226989}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJEOi9cdTRFRTNcdTc4MDEvZGVsX2RlbW8vVmlzdWFsaXphdGlvbkV4Y2xlX0RlbW8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJEOi9cdTRFRTNcdTc4MDEvZGVsX2RlbW8vVmlzdWFsaXphdGlvbkV4Y2xlX0RlbW8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNlYXJjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0IHsgaCB9IGZyb20gJy4vZWxlbWVudCc7CmltcG9ydCBTdWdnZXN0IGZyb20gJy4vc3VnZ2VzdCc7CmltcG9ydCB7IGNzc1ByZWZpeCB9IGZyb20gJy4uL2NvbmZpZyc7Cgp2YXIgRm9ybVNlbGVjdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gRm9ybVNlbGVjdChrZXksIGl0ZW1zLCB3aWR0aCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICB2YXIgZ2V0VGl0bGUgPSBhcmd1bWVudHMubGVuZ3RoID4gMyAmJiBhcmd1bWVudHNbM10gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1szXSA6IGZ1bmN0aW9uIChpdCkgewogICAgICByZXR1cm4gaXQ7CiAgICB9OwogICAgdmFyIGNoYW5nZSA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogZnVuY3Rpb24gKCkge307CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZvcm1TZWxlY3QpOwoKICAgIHRoaXMua2V5ID0ga2V5OwogICAgdGhpcy5nZXRUaXRsZSA9IGdldFRpdGxlOwoKICAgIHRoaXMudmNoYW5nZSA9IGZ1bmN0aW9uICgpIHt9OwoKICAgIHRoaXMuZWwgPSBoKCdkaXYnLCAiIi5jb25jYXQoY3NzUHJlZml4LCAiLWZvcm0tc2VsZWN0IikpOwogICAgdGhpcy5zdWdnZXN0ID0gbmV3IFN1Z2dlc3QoaXRlbXMubWFwKGZ1bmN0aW9uIChpdCkgewogICAgICByZXR1cm4gewogICAgICAgIGtleTogaXQsCiAgICAgICAgdGl0bGU6IF90aGlzLmdldFRpdGxlKGl0KQogICAgICB9OwogICAgfSksIGZ1bmN0aW9uIChpdCkgewogICAgICBfdGhpcy5pdGVtQ2xpY2soaXQua2V5KTsKCiAgICAgIGNoYW5nZShpdC5rZXkpOwoKICAgICAgX3RoaXMudmNoYW5nZShpdC5rZXkpOwogICAgfSwgd2lkdGgsIHRoaXMuZWwpOwogICAgdGhpcy5lbC5jaGlsZHJlbih0aGlzLml0ZW1FbCA9IGgoJ2RpdicsICdpbnB1dC10ZXh0JykuaHRtbCh0aGlzLmdldFRpdGxlKGtleSkpLCB0aGlzLnN1Z2dlc3QuZWwpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF90aGlzLnNob3coKTsKICAgIH0pOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEZvcm1TZWxlY3QsIFt7CiAgICBrZXk6ICJzaG93IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzaG93KCkgewogICAgICB0aGlzLnN1Z2dlc3Quc2VhcmNoKCcnKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpdGVtQ2xpY2siLAogICAgdmFsdWU6IGZ1bmN0aW9uIGl0ZW1DbGljayhpdCkgewogICAgICB0aGlzLmtleSA9IGl0OwogICAgICB0aGlzLml0ZW1FbC5odG1sKHRoaXMuZ2V0VGl0bGUoaXQpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ2YWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHZhbCh2KSB7CiAgICAgIGlmICh2ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICB0aGlzLmtleSA9IHY7CiAgICAgICAgdGhpcy5pdGVtRWwuaHRtbCh0aGlzLmdldFRpdGxlKHYpKTsKICAgICAgICByZXR1cm4gdGhpczsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMua2V5OwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEZvcm1TZWxlY3Q7Cn0oKTsKCmV4cG9ydCB7IEZvcm1TZWxlY3QgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"sources":["D:/代码/del_demo/VisualizationExcle_Demo/src/components/x-spreadsheet/component/form_select.js"],"names":["h","Suggest","cssPrefix","FormSelect","key","items","width","getTitle","it","change","vchange","el","suggest","map","title","itemClick","children","itemEl","html","on","show","search","v","undefined"],"mappings":";;;;;AAAA,SAASA,CAAT,QAAkB,WAAlB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,SAASC,SAAT,QAA0B,WAA1B;;IAEqBC,U;AACnB,sBAAYC,GAAZ,EAAiBC,KAAjB,EAAwBC,KAAxB,EAAuE;AAAA;;AAAA,QAAxCC,QAAwC,uEAA7B,UAAAC,EAAE;AAAA,aAAIA,EAAJ;AAAA,KAA2B;AAAA,QAAnBC,MAAmB,uEAAV,YAAM,CAAE,CAAE;;AAAA;;AACrE,SAAKL,GAAL,GAAWA,GAAX;AACA,SAAKG,QAAL,GAAgBA,QAAhB;;AACA,SAAKG,OAAL,GAAe,YAAM,CAAE,CAAvB;;AACA,SAAKC,EAAL,GAAUX,CAAC,CAAC,KAAD,YAAWE,SAAX,kBAAX;AACA,SAAKU,OAAL,GAAe,IAAIX,OAAJ,CAAYI,KAAK,CAACQ,GAAN,CAAU,UAAAL,EAAE;AAAA,aAAK;AAAEJ,QAAAA,GAAG,EAAEI,EAAP;AAAWM,QAAAA,KAAK,EAAE,KAAI,CAACP,QAAL,CAAcC,EAAd;AAAlB,OAAL;AAAA,KAAZ,CAAZ,EAAsE,UAACA,EAAD,EAAQ;AAC3F,MAAA,KAAI,CAACO,SAAL,CAAeP,EAAE,CAACJ,GAAlB;;AACAK,MAAAA,MAAM,CAACD,EAAE,CAACJ,GAAJ,CAAN;;AACA,MAAA,KAAI,CAACM,OAAL,CAAaF,EAAE,CAACJ,GAAhB;AACD,KAJc,EAIZE,KAJY,EAIL,KAAKK,EAJA,CAAf;AAKA,SAAKA,EAAL,CAAQK,QAAR,CACE,KAAKC,MAAL,GAAcjB,CAAC,CAAC,KAAD,EAAQ,YAAR,CAAD,CAAuBkB,IAAvB,CAA4B,KAAKX,QAAL,CAAcH,GAAd,CAA5B,CADhB,EAEE,KAAKQ,OAAL,CAAaD,EAFf,EAGEQ,EAHF,CAGK,OAHL,EAGc;AAAA,aAAM,KAAI,CAACC,IAAL,EAAN;AAAA,KAHd;AAID;;;;WAED,gBAAO;AACL,WAAKR,OAAL,CAAaS,MAAb,CAAoB,EAApB;AACD;;;WAED,mBAAUb,EAAV,EAAc;AACZ,WAAKJ,GAAL,GAAWI,EAAX;AACA,WAAKS,MAAL,CAAYC,IAAZ,CAAiB,KAAKX,QAAL,CAAcC,EAAd,CAAjB;AACD;;;WAED,aAAIc,CAAJ,EAAO;AACL,UAAIA,CAAC,KAAKC,SAAV,EAAqB;AACnB,aAAKnB,GAAL,GAAWkB,CAAX;AACA,aAAKL,MAAL,CAAYC,IAAZ,CAAiB,KAAKX,QAAL,CAAce,CAAd,CAAjB;AACA,eAAO,IAAP;AACD;;AACD,aAAO,KAAKlB,GAAZ;AACD;;;;;;SAjCkBD,U","sourcesContent":["import { h } from './element';\r\nimport Suggest from './suggest';\r\nimport { cssPrefix } from '../config';\r\n\r\nexport default class FormSelect {\r\n  constructor(key, items, width, getTitle = it => it, change = () => {}) {\r\n    this.key = key;\r\n    this.getTitle = getTitle;\r\n    this.vchange = () => {};\r\n    this.el = h('div', `${cssPrefix}-form-select`);\r\n    this.suggest = new Suggest(items.map(it => ({ key: it, title: this.getTitle(it) })), (it) => {\r\n      this.itemClick(it.key);\r\n      change(it.key);\r\n      this.vchange(it.key);\r\n    }, width, this.el);\r\n    this.el.children(\r\n      this.itemEl = h('div', 'input-text').html(this.getTitle(key)),\r\n      this.suggest.el,\r\n    ).on('click', () => this.show());\r\n  }\r\n\r\n  show() {\r\n    this.suggest.search('');\r\n  }\r\n\r\n  itemClick(it) {\r\n    this.key = it;\r\n    this.itemEl.html(this.getTitle(it));\r\n  }\r\n\r\n  val(v) {\r\n    if (v !== undefined) {\r\n      this.key = v;\r\n      this.itemEl.html(this.getTitle(v));\r\n      return this;\r\n    }\r\n    return this.key;\r\n  }\r\n}\r\n"]}]}