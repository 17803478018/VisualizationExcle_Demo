{"remainingRequest":"D:\\代码\\del_demo\\VisualizationExcle_Demo\\node_modules\\babel-loader\\lib\\index.js!D:\\代码\\del_demo\\VisualizationExcle_Demo\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\代码\\del_demo\\VisualizationExcle_Demo\\src\\components\\x-spreadsheet\\component\\suggest.js","dependencies":[{"path":"D:\\代码\\del_demo\\VisualizationExcle_Demo\\src\\components\\x-spreadsheet\\component\\suggest.js","mtime":1614915429343},{"path":"D:\\代码\\del_demo\\VisualizationExcle_Demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1596536485880},{"path":"D:\\代码\\del_demo\\VisualizationExcle_Demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1606828682259},{"path":"D:\\代码\\del_demo\\VisualizationExcle_Demo\\node_modules\\eslint-loader\\index.js","mtime":1603719226989}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJEOi9cdTRFRTNcdTc4MDEvZGVsX2RlbW8vVmlzdWFsaXphdGlvbkV4Y2xlX0RlbW8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJEOi9cdTRFRTNcdTc4MDEvZGVsX2RlbW8vVmlzdWFsaXphdGlvbkV4Y2xlX0RlbW8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJEOi9cdTRFRTNcdTc4MDEvZGVsX2RlbW8vVmlzdWFsaXphdGlvbkV4Y2xlX0RlbW8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN0YXJ0cy13aXRoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0IHsgaCB9IGZyb20gJy4vZWxlbWVudCc7CmltcG9ydCB7IGJpbmRDbGlja291dHNpZGUsIHVuYmluZENsaWNrb3V0c2lkZSB9IGZyb20gJy4vZXZlbnQnOwppbXBvcnQgeyBjc3NQcmVmaXggfSBmcm9tICcuLi9jb25maWcnOwoKZnVuY3Rpb24gaW5wdXRNb3ZlUHJldihldnQpIHsKICBldnQucHJldmVudERlZmF1bHQoKTsKICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgdmFyIGZpbHRlckl0ZW1zID0gdGhpcy5maWx0ZXJJdGVtczsKICBpZiAoZmlsdGVySXRlbXMubGVuZ3RoIDw9IDApIHJldHVybjsKICBpZiAodGhpcy5pdGVtSW5kZXggPj0gMCkgZmlsdGVySXRlbXNbdGhpcy5pdGVtSW5kZXhdLnRvZ2dsZSgpOwogIHRoaXMuaXRlbUluZGV4IC09IDE7CgogIGlmICh0aGlzLml0ZW1JbmRleCA8IDApIHsKICAgIHRoaXMuaXRlbUluZGV4ID0gZmlsdGVySXRlbXMubGVuZ3RoIC0gMTsKICB9CgogIGZpbHRlckl0ZW1zW3RoaXMuaXRlbUluZGV4XS50b2dnbGUoKTsKfQoKZnVuY3Rpb24gaW5wdXRNb3ZlTmV4dChldnQpIHsKICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgdmFyIGZpbHRlckl0ZW1zID0gdGhpcy5maWx0ZXJJdGVtczsKICBpZiAoZmlsdGVySXRlbXMubGVuZ3RoIDw9IDApIHJldHVybjsKICBpZiAodGhpcy5pdGVtSW5kZXggPj0gMCkgZmlsdGVySXRlbXNbdGhpcy5pdGVtSW5kZXhdLnRvZ2dsZSgpOwogIHRoaXMuaXRlbUluZGV4ICs9IDE7CgogIGlmICh0aGlzLml0ZW1JbmRleCA+IGZpbHRlckl0ZW1zLmxlbmd0aCAtIDEpIHsKICAgIHRoaXMuaXRlbUluZGV4ID0gMDsKICB9CgogIGZpbHRlckl0ZW1zW3RoaXMuaXRlbUluZGV4XS50b2dnbGUoKTsKfQoKZnVuY3Rpb24gaW5wdXRFbnRlcihldnQpIHsKICBldnQucHJldmVudERlZmF1bHQoKTsKICB2YXIgZmlsdGVySXRlbXMgPSB0aGlzLmZpbHRlckl0ZW1zOwogIGlmIChmaWx0ZXJJdGVtcy5sZW5ndGggPD0gMCkgcmV0dXJuOwogIGV2dC5zdG9wUHJvcGFnYXRpb24oKTsKICBpZiAodGhpcy5pdGVtSW5kZXggPCAwKSB0aGlzLml0ZW1JbmRleCA9IDA7CiAgZmlsdGVySXRlbXNbdGhpcy5pdGVtSW5kZXhdLmVsLmNsaWNrKCk7CiAgdGhpcy5oaWRlKCk7Cn0KCmZ1bmN0aW9uIGlucHV0S2V5ZG93bkhhbmRsZXIoZXZ0KSB7CiAgdmFyIGtleUNvZGUgPSBldnQua2V5Q29kZTsKCiAgaWYgKGV2dC5jdHJsS2V5KSB7CiAgICBldnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgfQoKICBzd2l0Y2ggKGtleUNvZGUpIHsKICAgIGNhc2UgMzc6CiAgICAgIC8vIGxlZnQKICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICBicmVhazsKCiAgICBjYXNlIDM4OgogICAgICAvLyB1cAogICAgICBpbnB1dE1vdmVQcmV2LmNhbGwodGhpcywgZXZ0KTsKICAgICAgYnJlYWs7CgogICAgY2FzZSAzOToKICAgICAgLy8gcmlnaHQKICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICBicmVhazsKCiAgICBjYXNlIDQwOgogICAgICAvLyBkb3duCiAgICAgIGlucHV0TW92ZU5leHQuY2FsbCh0aGlzLCBldnQpOwogICAgICBicmVhazsKCiAgICBjYXNlIDEzOgogICAgICAvLyBlbnRlcgogICAgICBpbnB1dEVudGVyLmNhbGwodGhpcywgZXZ0KTsKICAgICAgYnJlYWs7CgogICAgY2FzZSA5OgogICAgICBpbnB1dEVudGVyLmNhbGwodGhpcywgZXZ0KTsKICAgICAgYnJlYWs7CgogICAgZGVmYXVsdDoKICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpOwogICAgICBicmVhazsKICB9Cn0KCnZhciBTdWdnZXN0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBTdWdnZXN0KGl0ZW1zLCBpdGVtQ2xpY2spIHsKICAgIHZhciB3aWR0aCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogJzIwMHB4JzsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU3VnZ2VzdCk7CgogICAgdGhpcy5maWx0ZXJJdGVtcyA9IFtdOwogICAgdGhpcy5pdGVtcyA9IGl0ZW1zOwogICAgdGhpcy5lbCA9IGgoJ2RpdicsICIiLmNvbmNhdChjc3NQcmVmaXgsICItc3VnZ2VzdCIpKS5jc3MoJ3dpZHRoJywgd2lkdGgpLmhpZGUoKTsKICAgIHRoaXMuaXRlbUNsaWNrID0gaXRlbUNsaWNrOwogICAgdGhpcy5pdGVtSW5kZXggPSAtMTsKICB9CgogIF9jcmVhdGVDbGFzcyhTdWdnZXN0LCBbewogICAga2V5OiAic2V0T2Zmc2V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRPZmZzZXQodikgewogICAgICB0aGlzLmVsLmNzc1JlbW92ZUtleXMoJ3RvcCcsICdib3R0b20nKS5vZmZzZXQodik7CiAgICB9CiAgfSwgewogICAga2V5OiAiaGlkZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGlkZSgpIHsKICAgICAgdmFyIGVsID0gdGhpcy5lbDsKICAgICAgdGhpcy5maWx0ZXJJdGVtcyA9IFtdOwogICAgICB0aGlzLml0ZW1JbmRleCA9IC0xOwogICAgICBlbC5oaWRlKCk7CiAgICAgIHVuYmluZENsaWNrb3V0c2lkZSh0aGlzLmVsLnBhcmVudCgpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRJdGVtcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0SXRlbXMoaXRlbXMpIHsKICAgICAgdGhpcy5pdGVtcyA9IGl0ZW1zOyAvLyB0aGlzLnNlYXJjaCgnJyk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2VhcmNoIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZWFyY2god29yZCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzLAogICAgICAgICAgX2VsJGh0bWw7CgogICAgICB2YXIgaXRlbXMgPSB0aGlzLml0ZW1zOwoKICAgICAgaWYgKCEvXlxzKiQvLnRlc3Qod29yZCkpIHsKICAgICAgICBpdGVtcyA9IGl0ZW1zLmZpbHRlcihmdW5jdGlvbiAoaXQpIHsKICAgICAgICAgIHJldHVybiAoaXQua2V5IHx8IGl0KS5zdGFydHNXaXRoKHdvcmQudG9VcHBlckNhc2UoKSk7CiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGl0ZW1zID0gaXRlbXMubWFwKGZ1bmN0aW9uIChpdCkgewogICAgICAgIHZhciB0aXRsZSA9IGl0LnRpdGxlOwoKICAgICAgICBpZiAodGl0bGUpIHsKICAgICAgICAgIGlmICh0eXBlb2YgdGl0bGUgPT09ICdmdW5jdGlvbicpIHsKICAgICAgICAgICAgdGl0bGUgPSB0aXRsZSgpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aXRsZSA9IGl0OwogICAgICAgIH0KCiAgICAgICAgdmFyIGl0ZW0gPSBoKCdkaXYnLCAiIi5jb25jYXQoY3NzUHJlZml4LCAiLWl0ZW0iKSkuY2hpbGQodGl0bGUpLm9uKCdjbGljay5zdG9wJywgZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXMuaXRlbUNsaWNrKGl0KTsKCiAgICAgICAgICBfdGhpcy5oaWRlKCk7CiAgICAgICAgfSk7CgogICAgICAgIGlmIChpdC5sYWJlbCkgewogICAgICAgICAgaXRlbS5jaGlsZChoKCdkaXYnLCAnbGFiZWwnKS5odG1sKGl0LmxhYmVsKSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgfSk7CiAgICAgIHRoaXMuZmlsdGVySXRlbXMgPSBpdGVtczsKCiAgICAgIGlmIChpdGVtcy5sZW5ndGggPD0gMCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGVsID0gdGhpcy5lbDsgLy8gaXRlbXNbMF0udG9nZ2xlKCk7CgogICAgICAoX2VsJGh0bWwgPSBlbC5odG1sKCcnKSkuY2hpbGRyZW4uYXBwbHkoX2VsJGh0bWwsIF90b0NvbnN1bWFibGVBcnJheShpdGVtcykpLnNob3coKTsKCiAgICAgIGJpbmRDbGlja291dHNpZGUoZWwucGFyZW50KCksIGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpcy5oaWRlKCk7CiAgICAgIH0pOwogICAgfQogIH0sIHsKICAgIGtleTogImJpbmRJbnB1dEV2ZW50cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYmluZElucHV0RXZlbnRzKGlucHV0KSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgaW5wdXQub24oJ2tleWRvd24nLCBmdW5jdGlvbiAoZXZ0KSB7CiAgICAgICAgcmV0dXJuIGlucHV0S2V5ZG93bkhhbmRsZXIuY2FsbChfdGhpczIsIGV2dCk7CiAgICAgIH0pOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFN1Z2dlc3Q7Cn0oKTsKCmV4cG9ydCB7IFN1Z2dlc3QgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"sources":["D:/代码/del_demo/VisualizationExcle_Demo/src/components/x-spreadsheet/component/suggest.js"],"names":["h","bindClickoutside","unbindClickoutside","cssPrefix","inputMovePrev","evt","preventDefault","stopPropagation","filterItems","length","itemIndex","toggle","inputMoveNext","inputEnter","el","click","hide","inputKeydownHandler","keyCode","ctrlKey","call","Suggest","items","itemClick","width","css","v","cssRemoveKeys","offset","parent","word","test","filter","it","key","startsWith","toUpperCase","map","title","item","child","on","label","html","children","show","input"],"mappings":"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","sourcesContent":["import { h } from './element';\r\nimport { bindClickoutside, unbindClickoutside } from './event';\r\nimport { cssPrefix } from '../config';\r\n\r\nfunction inputMovePrev(evt) {\r\n  evt.preventDefault();\r\n  evt.stopPropagation();\r\n  const { filterItems } = this;\r\n  if (filterItems.length <= 0) return;\r\n  if (this.itemIndex >= 0) filterItems[this.itemIndex].toggle();\r\n  this.itemIndex -= 1;\r\n  if (this.itemIndex < 0) {\r\n    this.itemIndex = filterItems.length - 1;\r\n  }\r\n  filterItems[this.itemIndex].toggle();\r\n}\r\n\r\nfunction inputMoveNext(evt) {\r\n  evt.stopPropagation();\r\n  const { filterItems } = this;\r\n  if (filterItems.length <= 0) return;\r\n  if (this.itemIndex >= 0) filterItems[this.itemIndex].toggle();\r\n  this.itemIndex += 1;\r\n  if (this.itemIndex > filterItems.length - 1) {\r\n    this.itemIndex = 0;\r\n  }\r\n  filterItems[this.itemIndex].toggle();\r\n}\r\n\r\nfunction inputEnter(evt) {\r\n  evt.preventDefault();\r\n  const { filterItems } = this;\r\n  if (filterItems.length <= 0) return;\r\n  evt.stopPropagation();\r\n  if (this.itemIndex < 0) this.itemIndex = 0;\r\n  filterItems[this.itemIndex].el.click();\r\n  this.hide();\r\n}\r\n\r\nfunction inputKeydownHandler(evt) {\r\n  const { keyCode } = evt;\r\n  if (evt.ctrlKey) {\r\n    evt.stopPropagation();\r\n  }\r\n  switch (keyCode) {\r\n    case 37: // left\r\n      evt.stopPropagation();\r\n      break;\r\n    case 38: // up\r\n      inputMovePrev.call(this, evt);\r\n      break;\r\n    case 39: // right\r\n      evt.stopPropagation();\r\n      break;\r\n    case 40: // down\r\n      inputMoveNext.call(this, evt);\r\n      break;\r\n    case 13: // enter\r\n      inputEnter.call(this, evt);\r\n      break;\r\n    case 9:\r\n      inputEnter.call(this, evt);\r\n      break;\r\n    default:\r\n      evt.stopPropagation();\r\n      break;\r\n  }\r\n}\r\n\r\nexport default class Suggest {\r\n  constructor(items, itemClick, width = '200px') {\r\n    this.filterItems = [];\r\n    this.items = items;\r\n    this.el = h('div', `${cssPrefix}-suggest`).css('width', width).hide();\r\n    this.itemClick = itemClick;\r\n    this.itemIndex = -1;\r\n  }\r\n\r\n  setOffset(v) {\r\n    this.el.cssRemoveKeys('top', 'bottom')\r\n      .offset(v);\r\n  }\r\n\r\n  hide() {\r\n    const { el } = this;\r\n    this.filterItems = [];\r\n    this.itemIndex = -1;\r\n    el.hide();\r\n    unbindClickoutside(this.el.parent());\r\n  }\r\n\r\n  setItems(items) {\r\n    this.items = items;\r\n    // this.search('');\r\n  }\r\n\r\n  search(word) {\r\n    let { items } = this;\r\n    if (!/^\\s*$/.test(word)) {\r\n      items = items.filter(it => (it.key || it).startsWith(word.toUpperCase()));\r\n    }\r\n    items = items.map((it) => {\r\n      let { title } = it;\r\n      if (title) {\r\n        if (typeof title === 'function') {\r\n          title = title();\r\n        }\r\n      } else {\r\n        title = it;\r\n      }\r\n      const item = h('div', `${cssPrefix}-item`)\r\n        .child(title)\r\n        .on('click.stop', () => {\r\n          this.itemClick(it);\r\n          this.hide();\r\n        });\r\n      if (it.label) {\r\n        item.child(h('div', 'label').html(it.label));\r\n      }\r\n      return item;\r\n    });\r\n    this.filterItems = items;\r\n    if (items.length <= 0) {\r\n      return;\r\n    }\r\n    const { el } = this;\r\n    // items[0].toggle();\r\n    el.html('').children(...items).show();\r\n    bindClickoutside(el.parent(), () => { this.hide(); });\r\n  }\r\n\r\n  bindInputEvents(input) {\r\n    input.on('keydown', evt => inputKeydownHandler.call(this, evt));\r\n  }\r\n}\r\n"]}]}