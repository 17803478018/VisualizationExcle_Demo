{"remainingRequest":"C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\src\\components\\x-spreadsheet\\component\\form_field.js","dependencies":[{"path":"C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\src\\components\\x-spreadsheet\\component\\form_field.js","mtime":1615364198196},{"path":"C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615364186494},{"path":"C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1615364186192},{"path":"C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\node_modules\\eslint-loader\\index.js","mtime":1615364189991}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJDOi9Vc2Vycy9cdTU0MzRcdTVFRkFcdTY2MEUvRGVza3RvcC9WaXN1YWxpemF0aW9uRXhjbGVfRGVtby9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkM6L1VzZXJzL1x1NTQzNFx1NUVGQVx1NjYwRS9EZXNrdG9wL1Zpc3VhbGl6YXRpb25FeGNsZV9EZW1vL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCB7IGggfSBmcm9tICcuL2VsZW1lbnQnOwppbXBvcnQgeyBjc3NQcmVmaXggfSBmcm9tICcuLi9jb25maWcnOwppbXBvcnQgeyB0IH0gZnJvbSAnLi4vbG9jYWxlL2xvY2FsZSc7CnZhciBwYXR0ZXJucyA9IHsKICBudW1iZXI6IC8oXlxkKyQpfCheXGQrKFwuXGR7MCw0fSk/JCkvLAogIGRhdGU6IC9eXGR7NH0tXGR7MSwyfS1cZHsxLDJ9JC8KfTsgLy8gcnVsZTogeyByZXF1aXJlZDogZmFsc2UsIHR5cGUsIHBhdHRlcm46IC8vIH0KCnZhciBGb3JtRmllbGQgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEZvcm1GaWVsZChpbnB1dCwgcnVsZSwgbGFiZWwsIGxhYmVsV2lkdGgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZvcm1GaWVsZCk7CgogICAgdGhpcy5sYWJlbCA9ICcnOwogICAgdGhpcy5ydWxlID0gcnVsZTsKCiAgICBpZiAobGFiZWwpIHsKICAgICAgdGhpcy5sYWJlbCA9IGgoJ2xhYmVsJywgJ2xhYmVsJykuY3NzKCd3aWR0aCcsICIiLmNvbmNhdChsYWJlbFdpZHRoLCAicHgiKSkuaHRtbChsYWJlbCk7CiAgICB9CgogICAgdGhpcy50aXAgPSBoKCdkaXYnLCAndGlwJykuY2hpbGQoJ3RpcCcpLmhpZGUoKTsKICAgIHRoaXMuaW5wdXQgPSBpbnB1dDsKCiAgICB0aGlzLmlucHV0LnZjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfdGhpcy52YWxpZGF0ZSgpOwogICAgfTsKCiAgICB0aGlzLmVsID0gaCgnZGl2JywgIiIuY29uY2F0KGNzc1ByZWZpeCwgIi1mb3JtLWZpZWxkIikpLmNoaWxkcmVuKHRoaXMubGFiZWwsIGlucHV0LmVsLCB0aGlzLnRpcCk7CiAgfQoKICBfY3JlYXRlQ2xhc3MoRm9ybUZpZWxkLCBbewogICAga2V5OiAiaXNTaG93IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc1Nob3coKSB7CiAgICAgIHJldHVybiB0aGlzLmVsLmNzcygnZGlzcGxheScpICE9PSAnbm9uZSc7CiAgICB9CiAgfSwgewogICAga2V5OiAic2hvdyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2hvdygpIHsKICAgICAgdGhpcy5lbC5zaG93KCk7CiAgICB9CiAgfSwgewogICAga2V5OiAiaGlkZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGlkZSgpIHsKICAgICAgdGhpcy5lbC5oaWRlKCk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH0sIHsKICAgIGtleTogInZhbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdmFsKHYpIHsKICAgICAgcmV0dXJuIHRoaXMuaW5wdXQudmFsKHYpOwogICAgfQogIH0sIHsKICAgIGtleTogImhpbnQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGhpbnQoX2hpbnQpIHsKICAgICAgdGhpcy5pbnB1dC5oaW50KF9oaW50KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ2YWxpZGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdmFsaWRhdGUoKSB7CiAgICAgIHZhciBpbnB1dCA9IHRoaXMuaW5wdXQsCiAgICAgICAgICBydWxlID0gdGhpcy5ydWxlLAogICAgICAgICAgdGlwID0gdGhpcy50aXAsCiAgICAgICAgICBlbCA9IHRoaXMuZWw7CiAgICAgIHZhciB2ID0gaW5wdXQudmFsKCk7CgogICAgICBpZiAocnVsZS5yZXF1aXJlZCkgewogICAgICAgIGlmICgvXlxzKiQvLnRlc3QodikpIHsKICAgICAgICAgIHRpcC5odG1sKHQoJ3ZhbGlkYXRpb24ucmVxdWlyZWQnKSk7CiAgICAgICAgICBlbC5hZGRDbGFzcygnZXJyb3InKTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmIChydWxlLnR5cGUgfHwgcnVsZS5wYXR0ZXJuKSB7CiAgICAgICAgdmFyIHBhdHRlcm4gPSBydWxlLnBhdHRlcm4gfHwgcGF0dGVybnNbcnVsZS50eXBlXTsKCiAgICAgICAgaWYgKCFwYXR0ZXJuLnRlc3QodikpIHsKICAgICAgICAgIHRpcC5odG1sKHQoJ3ZhbGlkYXRpb24ubm90TWF0Y2gnKSk7CiAgICAgICAgICBlbC5hZGRDbGFzcygnZXJyb3InKTsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGVsLnJlbW92ZUNsYXNzKCdlcnJvcicpOwogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9XSk7CgogIHJldHVybiBGb3JtRmllbGQ7Cn0oKTsKCmV4cG9ydCB7IEZvcm1GaWVsZCBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["C:/Users/吴建明/Desktop/VisualizationExcle_Demo/src/components/x-spreadsheet/component/form_field.js"],"names":["h","cssPrefix","t","patterns","number","date","FormField","input","rule","label","labelWidth","css","html","tip","child","hide","vchange","validate","el","children","show","v","val","hint","required","test","addClass","type","pattern","removeClass"],"mappings":";;AAAA,SAASA,CAAT,QAAkB,WAAlB;AACA,SAASC,SAAT,QAA0B,WAA1B;AACA,SAASC,CAAT,QAAkB,kBAAlB;AAEA,IAAMC,QAAQ,GAAG;AACfC,EAAAA,MAAM,EAAE,6BADO;AAEfC,EAAAA,IAAI,EAAE;AAFS,CAAjB,C,CAKA;;IACqBC,S;AACnB,qBAAYC,KAAZ,EAAmBC,IAAnB,EAAyBC,KAAzB,EAAgCC,UAAhC,EAA4C;AAAA;;AAAA;;AAC1C,SAAKD,KAAL,GAAa,EAAb;AACA,SAAKD,IAAL,GAAYA,IAAZ;;AACA,QAAIC,KAAJ,EAAW;AACT,WAAKA,KAAL,GAAaT,CAAC,CAAC,OAAD,EAAU,OAAV,CAAD,CAAoBW,GAApB,CAAwB,OAAxB,YAAoCD,UAApC,SAAoDE,IAApD,CAAyDH,KAAzD,CAAb;AACD;;AACD,SAAKI,GAAL,GAAWb,CAAC,CAAC,KAAD,EAAQ,KAAR,CAAD,CAAgBc,KAAhB,CAAsB,KAAtB,EAA6BC,IAA7B,EAAX;AACA,SAAKR,KAAL,GAAaA,KAAb;;AACA,SAAKA,KAAL,CAAWS,OAAX,GAAqB;AAAA,aAAM,KAAI,CAACC,QAAL,EAAN;AAAA,KAArB;;AACA,SAAKC,EAAL,GAAUlB,CAAC,CAAC,KAAD,YAAWC,SAAX,iBAAD,CACPkB,QADO,CACE,KAAKV,KADP,EACcF,KAAK,CAACW,EADpB,EACwB,KAAKL,GAD7B,CAAV;AAED;;;;WAED,kBAAS;AACP,aAAO,KAAKK,EAAL,CAAQP,GAAR,CAAY,SAAZ,MAA2B,MAAlC;AACD;;;WAED,gBAAO;AACL,WAAKO,EAAL,CAAQE,IAAR;AACD;;;WAED,gBAAO;AACL,WAAKF,EAAL,CAAQH,IAAR;AACA,aAAO,IAAP;AACD;;;WAED,aAAIM,CAAJ,EAAO;AACL,aAAO,KAAKd,KAAL,CAAWe,GAAX,CAAeD,CAAf,CAAP;AACD;;;WAED,cAAKE,KAAL,EAAW;AACT,WAAKhB,KAAL,CAAWgB,IAAX,CAAgBA,KAAhB;AACD;;;WAED,oBAAW;AAAA,UAEPhB,KAFO,GAGL,IAHK,CAEPA,KAFO;AAAA,UAEAC,IAFA,GAGL,IAHK,CAEAA,IAFA;AAAA,UAEMK,GAFN,GAGL,IAHK,CAEMA,GAFN;AAAA,UAEWK,EAFX,GAGL,IAHK,CAEWA,EAFX;AAIT,UAAMG,CAAC,GAAGd,KAAK,CAACe,GAAN,EAAV;;AACA,UAAId,IAAI,CAACgB,QAAT,EAAmB;AACjB,YAAI,QAAQC,IAAR,CAAaJ,CAAb,CAAJ,EAAqB;AACnBR,UAAAA,GAAG,CAACD,IAAJ,CAASV,CAAC,CAAC,qBAAD,CAAV;AACAgB,UAAAA,EAAE,CAACQ,QAAH,CAAY,OAAZ;AACA,iBAAO,KAAP;AACD;AACF;;AACD,UAAIlB,IAAI,CAACmB,IAAL,IAAanB,IAAI,CAACoB,OAAtB,EAA+B;AAC7B,YAAMA,OAAO,GAAGpB,IAAI,CAACoB,OAAL,IAAgBzB,QAAQ,CAACK,IAAI,CAACmB,IAAN,CAAxC;;AACA,YAAI,CAACC,OAAO,CAACH,IAAR,CAAaJ,CAAb,CAAL,EAAsB;AACpBR,UAAAA,GAAG,CAACD,IAAJ,CAASV,CAAC,CAAC,qBAAD,CAAV;AACAgB,UAAAA,EAAE,CAACQ,QAAH,CAAY,OAAZ;AACA,iBAAO,KAAP;AACD;AACF;;AACDR,MAAAA,EAAE,CAACW,WAAH,CAAe,OAAf;AACA,aAAO,IAAP;AACD;;;;;;SAzDkBvB,S","sourcesContent":["import { h } from './element';\r\nimport { cssPrefix } from '../config';\r\nimport { t } from '../locale/locale';\r\n\r\nconst patterns = {\r\n  number: /(^\\d+$)|(^\\d+(\\.\\d{0,4})?$)/,\r\n  date: /^\\d{4}-\\d{1,2}-\\d{1,2}$/,\r\n};\r\n\r\n// rule: { required: false, type, pattern: // }\r\nexport default class FormField {\r\n  constructor(input, rule, label, labelWidth) {\r\n    this.label = '';\r\n    this.rule = rule;\r\n    if (label) {\r\n      this.label = h('label', 'label').css('width', `${labelWidth}px`).html(label);\r\n    }\r\n    this.tip = h('div', 'tip').child('tip').hide();\r\n    this.input = input;\r\n    this.input.vchange = () => this.validate();\r\n    this.el = h('div', `${cssPrefix}-form-field`)\r\n      .children(this.label, input.el, this.tip);\r\n  }\r\n\r\n  isShow() {\r\n    return this.el.css('display') !== 'none';\r\n  }\r\n\r\n  show() {\r\n    this.el.show();\r\n  }\r\n\r\n  hide() {\r\n    this.el.hide();\r\n    return this;\r\n  }\r\n\r\n  val(v) {\r\n    return this.input.val(v);\r\n  }\r\n\r\n  hint(hint) {\r\n    this.input.hint(hint);\r\n  }\r\n\r\n  validate() {\r\n    const {\r\n      input, rule, tip, el,\r\n    } = this;\r\n    const v = input.val();\r\n    if (rule.required) {\r\n      if (/^\\s*$/.test(v)) {\r\n        tip.html(t('validation.required'));\r\n        el.addClass('error');\r\n        return false;\r\n      }\r\n    }\r\n    if (rule.type || rule.pattern) {\r\n      const pattern = rule.pattern || patterns[rule.type];\r\n      if (!pattern.test(v)) {\r\n        tip.html(t('validation.notMatch'));\r\n        el.addClass('error');\r\n        return false;\r\n      }\r\n    }\r\n    el.removeClass('error');\r\n    return true;\r\n  }\r\n}\r\n"]}]}