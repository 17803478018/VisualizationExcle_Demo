{"remainingRequest":"C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\src\\components\\x-spreadsheet\\component\\event.js","dependencies":[{"path":"C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\src\\components\\x-spreadsheet\\component\\event.js","mtime":1616639586805},{"path":"C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616639573358},{"path":"C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1616639572994},{"path":"C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\node_modules\\eslint-loader\\index.js","mtime":1616639576682}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:LyogZ2xvYmFsIHdpbmRvdyAqLwpleHBvcnQgZnVuY3Rpb24gYmluZCh0YXJnZXQsIG5hbWUsIGZuKSB7CiAgdGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIobmFtZSwgZm4pOwp9CmV4cG9ydCBmdW5jdGlvbiB1bmJpbmQodGFyZ2V0LCBuYW1lLCBmbikgewogIHRhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKG5hbWUsIGZuKTsKfQpleHBvcnQgZnVuY3Rpb24gdW5iaW5kQ2xpY2tvdXRzaWRlKGVsKSB7CiAgaWYgKGVsLnhjbGlja291dHNpZGUpIHsKICAgIHVuYmluZCh3aW5kb3cuZG9jdW1lbnQuYm9keSwgJ2NsaWNrJywgZWwueGNsaWNrb3V0c2lkZSk7CiAgICBkZWxldGUgZWwueGNsaWNrb3V0c2lkZTsKICB9Cn0gLy8gdGhlIGxlZnQgbW91c2UgYnV0dG9uOiBtb3VzZWRvd24g4oaSIG1vdXNldXAg4oaSIGNsaWNrCi8vIHRoZSByaWdodCBtb3VzZSBidXR0b246IG1vdXNlZG93biDihpIgY29udGVueHRtZW51IOKGkiBtb3VzZXVwCi8vIHRoZSByaWdodCBtb3VzZSBidXR0b24gaW4gZmlyZWZveCg+NjUuMCk6IG1vdXNlZG93biDihpIgY29udGVueHRtZW51IOKGkiBtb3VzZXVwIOKGkiBjbGljayBvbiB3aW5kb3cKCmV4cG9ydCBmdW5jdGlvbiBiaW5kQ2xpY2tvdXRzaWRlKGVsLCBjYikgewogIGVsLnhjbGlja291dHNpZGUgPSBmdW5jdGlvbiAoZXZ0KSB7CiAgICAvLyBpZ25vcmUgZG91YmxlIGNsaWNrCiAgICAvLyBjb25zb2xlLmxvZygnZXZ0OicsIGV2dCk7CiAgICBpZiAoZXZ0LmRldGFpbCA9PT0gMiB8fCBlbC5jb250YWlucyhldnQudGFyZ2V0KSkgcmV0dXJuOwogICAgaWYgKGNiKSBjYihlbCk7ZWxzZSB7CiAgICAgIGVsLmhpZGUoKTsKICAgICAgdW5iaW5kQ2xpY2tvdXRzaWRlKGVsKTsKICAgIH0KICB9OwoKICBiaW5kKHdpbmRvdy5kb2N1bWVudC5ib2R5LCAnY2xpY2snLCBlbC54Y2xpY2tvdXRzaWRlKTsKfQpleHBvcnQgZnVuY3Rpb24gbW91c2VNb3ZlVXAodGFyZ2V0LCBtb3ZlZnVuYywgdXBmdW5jKSB7CiAgYmluZCh0YXJnZXQsICdtb3VzZW1vdmUnLCBtb3ZlZnVuYyk7CiAgdmFyIHQgPSB0YXJnZXQ7CgogIHQueEV2dFVwID0gZnVuY3Rpb24gKGV2dCkgewogICAgLy8gY29uc29sZS5sb2coJ21vdXNldXA+Pj4nKTsKICAgIHVuYmluZCh0YXJnZXQsICdtb3VzZW1vdmUnLCBtb3ZlZnVuYyk7CiAgICB1bmJpbmQodGFyZ2V0LCAnbW91c2V1cCcsIHRhcmdldC54RXZ0VXApOwogICAgdXBmdW5jKGV2dCk7CiAgfTsKCiAgYmluZCh0YXJnZXQsICdtb3VzZXVwJywgdGFyZ2V0LnhFdnRVcCk7Cn0KCmZ1bmN0aW9uIGNhbFRvdWNoRGlyZWN0aW9uKHNwYW54LCBzcGFueSwgZXZ0LCBjYikgewogIHZhciBkaXJlY3Rpb24gPSAnJzsgLy8gY29uc29sZS5sb2coJ3NwYW54OicsIHNwYW54LCAnLCBzcGFueTonLCBzcGFueSk7CgogIGlmIChNYXRoLmFicyhzcGFueCkgPiBNYXRoLmFicyhzcGFueSkpIHsKICAgIC8vIGhvcml6b250YWwKICAgIGRpcmVjdGlvbiA9IHNwYW54ID4gMCA/ICdyaWdodCcgOiAnbGVmdCc7CiAgICBjYihkaXJlY3Rpb24sIHNwYW54LCBldnQpOwogIH0gZWxzZSB7CiAgICAvLyB2ZXJ0aWNhbAogICAgZGlyZWN0aW9uID0gc3BhbnkgPiAwID8gJ2Rvd24nIDogJ3VwJzsKICAgIGNiKGRpcmVjdGlvbiwgc3BhbnksIGV2dCk7CiAgfQp9IC8vIGNiID0gKGRpcmVjdGlvbiwgZGlzdGFuY2UpID0+IHt9CgoKZXhwb3J0IGZ1bmN0aW9uIGJpbmRUb3VjaCh0YXJnZXQsIF9yZWYpIHsKICB2YXIgbW92ZSA9IF9yZWYubW92ZSwKICAgICAgZW5kID0gX3JlZi5lbmQ7CiAgdmFyIHN0YXJ0eCA9IDA7CiAgdmFyIHN0YXJ0eSA9IDA7CiAgYmluZCh0YXJnZXQsICd0b3VjaHN0YXJ0JywgZnVuY3Rpb24gKGV2dCkgewogICAgdmFyIF9ldnQkdG91Y2hlcyQgPSBldnQudG91Y2hlc1swXSwKICAgICAgICBwYWdlWCA9IF9ldnQkdG91Y2hlcyQucGFnZVgsCiAgICAgICAgcGFnZVkgPSBfZXZ0JHRvdWNoZXMkLnBhZ2VZOwogICAgc3RhcnR4ID0gcGFnZVg7CiAgICBzdGFydHkgPSBwYWdlWTsKICB9KTsKICBiaW5kKHRhcmdldCwgJ3RvdWNobW92ZScsIGZ1bmN0aW9uIChldnQpIHsKICAgIGlmICghbW92ZSkgcmV0dXJuOwogICAgdmFyIF9ldnQkY2hhbmdlZFRvdWNoZXMkID0gZXZ0LmNoYW5nZWRUb3VjaGVzWzBdLAogICAgICAgIHBhZ2VYID0gX2V2dCRjaGFuZ2VkVG91Y2hlcyQucGFnZVgsCiAgICAgICAgcGFnZVkgPSBfZXZ0JGNoYW5nZWRUb3VjaGVzJC5wYWdlWTsKICAgIHZhciBzcGFueCA9IHBhZ2VYIC0gc3RhcnR4OwogICAgdmFyIHNwYW55ID0gcGFnZVkgLSBzdGFydHk7CgogICAgaWYgKE1hdGguYWJzKHNwYW54KSA+IDEwIHx8IE1hdGguYWJzKHNwYW55KSA+IDEwKSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdzcGFueDonLCBzcGFueCwgJywgc3Bhbnk6Jywgc3BhbnkpOwogICAgICBjYWxUb3VjaERpcmVjdGlvbihzcGFueCwgc3BhbnksIGV2dCwgbW92ZSk7CiAgICAgIHN0YXJ0eCA9IHBhZ2VYOwogICAgICBzdGFydHkgPSBwYWdlWTsKICAgIH0KCiAgICBldnQucHJldmVudERlZmF1bHQoKTsKICB9KTsKICBiaW5kKHRhcmdldCwgJ3RvdWNoZW5kJywgZnVuY3Rpb24gKGV2dCkgewogICAgaWYgKCFlbmQpIHJldHVybjsKICAgIHZhciBfZXZ0JGNoYW5nZWRUb3VjaGVzJDIgPSBldnQuY2hhbmdlZFRvdWNoZXNbMF0sCiAgICAgICAgcGFnZVggPSBfZXZ0JGNoYW5nZWRUb3VjaGVzJDIucGFnZVgsCiAgICAgICAgcGFnZVkgPSBfZXZ0JGNoYW5nZWRUb3VjaGVzJDIucGFnZVk7CiAgICB2YXIgc3BhbnggPSBwYWdlWCAtIHN0YXJ0eDsKICAgIHZhciBzcGFueSA9IHBhZ2VZIC0gc3RhcnR5OwogICAgY2FsVG91Y2hEaXJlY3Rpb24oc3BhbngsIHNwYW55LCBldnQsIGVuZCk7CiAgfSk7Cn0="},{"version":3,"sources":["C:/Users/吴建明/Desktop/VisualizationExcle_Demo/src/components/x-spreadsheet/component/event.js"],"names":["bind","target","name","fn","addEventListener","unbind","removeEventListener","unbindClickoutside","el","xclickoutside","window","document","body","bindClickoutside","cb","evt","detail","contains","hide","mouseMoveUp","movefunc","upfunc","t","xEvtUp","calTouchDirection","spanx","spany","direction","Math","abs","bindTouch","move","end","startx","starty","touches","pageX","pageY","changedTouches","preventDefault"],"mappings":"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","sourcesContent":["/* global window */\r\nexport function bind(target, name, fn) {\r\n  target.addEventListener(name, fn);\r\n}\r\nexport function unbind(target, name, fn) {\r\n  target.removeEventListener(name, fn);\r\n}\r\nexport function unbindClickoutside(el) {\r\n  if (el.xclickoutside) {\r\n    unbind(window.document.body, 'click', el.xclickoutside);\r\n    delete el.xclickoutside;\r\n  }\r\n}\r\n\r\n// the left mouse button: mousedown → mouseup → click\r\n// the right mouse button: mousedown → contenxtmenu → mouseup\r\n// the right mouse button in firefox(>65.0): mousedown → contenxtmenu → mouseup → click on window\r\nexport function bindClickoutside(el, cb) {\r\n  el.xclickoutside = (evt) => {\r\n    // ignore double click\r\n    // console.log('evt:', evt);\r\n    if (evt.detail === 2 || el.contains(evt.target)) return;\r\n    if (cb) cb(el);\r\n    else {\r\n      el.hide();\r\n      unbindClickoutside(el);\r\n    }\r\n  };\r\n  bind(window.document.body, 'click', el.xclickoutside);\r\n}\r\nexport function mouseMoveUp(target, movefunc, upfunc) {\r\n  bind(target, 'mousemove', movefunc);\r\n  const t = target;\r\n  t.xEvtUp = (evt) => {\r\n    // console.log('mouseup>>>');\r\n    unbind(target, 'mousemove', movefunc);\r\n    unbind(target, 'mouseup', target.xEvtUp);\r\n    upfunc(evt);\r\n  };\r\n  bind(target, 'mouseup', target.xEvtUp);\r\n}\r\n\r\nfunction calTouchDirection(spanx, spany, evt, cb) {\r\n  let direction = '';\r\n  // console.log('spanx:', spanx, ', spany:', spany);\r\n  if (Math.abs(spanx) > Math.abs(spany)) {\r\n    // horizontal\r\n    direction = spanx > 0 ? 'right' : 'left';\r\n    cb(direction, spanx, evt);\r\n  } else {\r\n    // vertical\r\n    direction = spany > 0 ? 'down' : 'up';\r\n    cb(direction, spany, evt);\r\n  }\r\n}\r\n// cb = (direction, distance) => {}\r\nexport function bindTouch(target, { move, end }) {\r\n  let startx = 0;\r\n  let starty = 0;\r\n  bind(target, 'touchstart', (evt) => {\r\n    const { pageX, pageY } = evt.touches[0];\r\n    startx = pageX;\r\n    starty = pageY;\r\n  });\r\n  bind(target, 'touchmove', (evt) => {\r\n    if (!move) return;\r\n    const { pageX, pageY } = evt.changedTouches[0];\r\n    const spanx = pageX - startx;\r\n    const spany = pageY - starty;\r\n    if (Math.abs(spanx) > 10 || Math.abs(spany) > 10) {\r\n      // console.log('spanx:', spanx, ', spany:', spany);\r\n      calTouchDirection(spanx, spany, evt, move);\r\n      startx = pageX;\r\n      starty = pageY;\r\n    }\r\n    evt.preventDefault();\r\n  });\r\n  bind(target, 'touchend', (evt) => {\r\n    if (!end) return;\r\n    const { pageX, pageY } = evt.changedTouches[0];\r\n    const spanx = pageX - startx;\r\n    const spany = pageY - starty;\r\n    calTouchDirection(spanx, spany, evt, end);\r\n  });\r\n}\r\n"]}]}