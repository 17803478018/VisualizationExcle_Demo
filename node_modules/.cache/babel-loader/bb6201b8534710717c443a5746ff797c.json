{"remainingRequest":"D:\\代码\\del_demo\\VisualizationExcle_Demo\\node_modules\\babel-loader\\lib\\index.js!D:\\代码\\del_demo\\VisualizationExcle_Demo\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\代码\\del_demo\\VisualizationExcle_Demo\\src\\components\\x-spreadsheet\\core\\history.js","dependencies":[{"path":"D:\\代码\\del_demo\\VisualizationExcle_Demo\\src\\components\\x-spreadsheet\\core\\history.js","mtime":1614915429361},{"path":"D:\\代码\\del_demo\\VisualizationExcle_Demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1596536485880},{"path":"D:\\代码\\del_demo\\VisualizationExcle_Demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1606828682259},{"path":"D:\\代码\\del_demo\\VisualizationExcle_Demo\\node_modules\\eslint-loader\\index.js","mtime":1603719226989}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJEOi9cdTRFRTNcdTc4MDEvZGVsX2RlbW8vVmlzdWFsaXphdGlvbkV4Y2xlX0RlbW8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJEOi9cdTRFRTNcdTc4MDEvZGVsX2RlbW8vVmlzdWFsaXphdGlvbkV4Y2xlX0RlbW8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKCi8vIGltcG9ydCBoZWxwZXIgZnJvbSAnLi4vaGVscGVyJzsKdmFyIEhpc3RvcnkgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEhpc3RvcnkoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgSGlzdG9yeSk7CgogICAgdGhpcy51bmRvSXRlbXMgPSBbXTsKICAgIHRoaXMucmVkb0l0ZW1zID0gW107CiAgfQoKICBfY3JlYXRlQ2xhc3MoSGlzdG9yeSwgW3sKICAgIGtleTogImFkZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkKGRhdGEpIHsKICAgICAgdGhpcy51bmRvSXRlbXMucHVzaChKU09OLnN0cmluZ2lmeShkYXRhKSk7CiAgICAgIHRoaXMucmVkb0l0ZW1zID0gW107CiAgICB9CiAgfSwgewogICAga2V5OiAiY2FuVW5kbyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2FuVW5kbygpIHsKICAgICAgcmV0dXJuIHRoaXMudW5kb0l0ZW1zLmxlbmd0aCA+IDA7CiAgICB9CiAgfSwgewogICAga2V5OiAiY2FuUmVkbyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2FuUmVkbygpIHsKICAgICAgcmV0dXJuIHRoaXMucmVkb0l0ZW1zLmxlbmd0aCA+IDA7CiAgICB9CiAgfSwgewogICAga2V5OiAidW5kbyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdW5kbyhjdXJyZW50ZCwgY2IpIHsKICAgICAgdmFyIHVuZG9JdGVtcyA9IHRoaXMudW5kb0l0ZW1zLAogICAgICAgICAgcmVkb0l0ZW1zID0gdGhpcy5yZWRvSXRlbXM7CgogICAgICBpZiAodGhpcy5jYW5VbmRvKCkpIHsKICAgICAgICByZWRvSXRlbXMucHVzaChKU09OLnN0cmluZ2lmeShjdXJyZW50ZCkpOwogICAgICAgIGNiKEpTT04ucGFyc2UodW5kb0l0ZW1zLnBvcCgpKSk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWRvIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWRvKGN1cnJlbnRkLCBjYikgewogICAgICB2YXIgdW5kb0l0ZW1zID0gdGhpcy51bmRvSXRlbXMsCiAgICAgICAgICByZWRvSXRlbXMgPSB0aGlzLnJlZG9JdGVtczsKCiAgICAgIGlmICh0aGlzLmNhblJlZG8oKSkgewogICAgICAgIHVuZG9JdGVtcy5wdXNoKEpTT04uc3RyaW5naWZ5KGN1cnJlbnRkKSk7CiAgICAgICAgY2IoSlNPTi5wYXJzZShyZWRvSXRlbXMucG9wKCkpKTsKICAgICAgfQogICAgfQogIH1dKTsKCiAgcmV0dXJuIEhpc3Rvcnk7Cn0oKTsKCmV4cG9ydCB7IEhpc3RvcnkgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"sources":["D:/代码/del_demo/VisualizationExcle_Demo/src/components/x-spreadsheet/core/history.js"],"names":["History","undoItems","redoItems","data","push","JSON","stringify","length","currentd","cb","canUndo","parse","pop","canRedo"],"mappings":";;;AAAA;IAEqBA,O;AACnB,qBAAc;AAAA;;AACZ,SAAKC,SAAL,GAAiB,EAAjB;AACA,SAAKC,SAAL,GAAiB,EAAjB;AACD;;;;WAED,aAAIC,IAAJ,EAAU;AACR,WAAKF,SAAL,CAAeG,IAAf,CAAoBC,IAAI,CAACC,SAAL,CAAeH,IAAf,CAApB;AACA,WAAKD,SAAL,GAAiB,EAAjB;AACD;;;WAED,mBAAU;AACR,aAAO,KAAKD,SAAL,CAAeM,MAAf,GAAwB,CAA/B;AACD;;;WAED,mBAAU;AACR,aAAO,KAAKL,SAAL,CAAeK,MAAf,GAAwB,CAA/B;AACD;;;WAED,cAAKC,QAAL,EAAeC,EAAf,EAAmB;AAAA,UACTR,SADS,GACgB,IADhB,CACTA,SADS;AAAA,UACEC,SADF,GACgB,IADhB,CACEA,SADF;;AAEjB,UAAI,KAAKQ,OAAL,EAAJ,EAAoB;AAClBR,QAAAA,SAAS,CAACE,IAAV,CAAeC,IAAI,CAACC,SAAL,CAAeE,QAAf,CAAf;AACAC,QAAAA,EAAE,CAACJ,IAAI,CAACM,KAAL,CAAWV,SAAS,CAACW,GAAV,EAAX,CAAD,CAAF;AACD;AACF;;;WAED,cAAKJ,QAAL,EAAeC,EAAf,EAAmB;AAAA,UACTR,SADS,GACgB,IADhB,CACTA,SADS;AAAA,UACEC,SADF,GACgB,IADhB,CACEA,SADF;;AAEjB,UAAI,KAAKW,OAAL,EAAJ,EAAoB;AAClBZ,QAAAA,SAAS,CAACG,IAAV,CAAeC,IAAI,CAACC,SAAL,CAAeE,QAAf,CAAf;AACAC,QAAAA,EAAE,CAACJ,IAAI,CAACM,KAAL,CAAWT,SAAS,CAACU,GAAV,EAAX,CAAD,CAAF;AACD;AACF;;;;;;SAjCkBZ,O","sourcesContent":["// import helper from '../helper';\r\n\r\nexport default class History {\r\n  constructor() {\r\n    this.undoItems = [];\r\n    this.redoItems = [];\r\n  }\r\n\r\n  add(data) {\r\n    this.undoItems.push(JSON.stringify(data));\r\n    this.redoItems = [];\r\n  }\r\n\r\n  canUndo() {\r\n    return this.undoItems.length > 0;\r\n  }\r\n\r\n  canRedo() {\r\n    return this.redoItems.length > 0;\r\n  }\r\n\r\n  undo(currentd, cb) {\r\n    const { undoItems, redoItems } = this;\r\n    if (this.canUndo()) {\r\n      redoItems.push(JSON.stringify(currentd));\r\n      cb(JSON.parse(undoItems.pop()));\r\n    }\r\n  }\r\n\r\n  redo(currentd, cb) {\r\n    const { undoItems, redoItems } = this;\r\n    if (this.canRedo()) {\r\n      undoItems.push(JSON.stringify(currentd));\r\n      cb(JSON.parse(redoItems.pop()));\r\n    }\r\n  }\r\n}\r\n"]}]}