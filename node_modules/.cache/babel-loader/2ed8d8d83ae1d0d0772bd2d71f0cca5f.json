{"remainingRequest":"C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\src\\components\\x-spreadsheet\\core\\history.js","dependencies":[{"path":"C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\src\\components\\x-spreadsheet\\core\\history.js","mtime":1616639586837},{"path":"C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616639573358},{"path":"C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1616639572994},{"path":"C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\node_modules\\eslint-loader\\index.js","mtime":1616639576682}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJDOi9Vc2Vycy9cdTU0MzRcdTVFRkFcdTY2MEUvRGVza3RvcC9WaXN1YWxpemF0aW9uRXhjbGVfRGVtby9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkM6L1VzZXJzL1x1NTQzNFx1NUVGQVx1NjYwRS9EZXNrdG9wL1Zpc3VhbGl6YXRpb25FeGNsZV9EZW1vL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CgovLyBpbXBvcnQgaGVscGVyIGZyb20gJy4uL2hlbHBlcic7CnZhciBIaXN0b3J5ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBIaXN0b3J5KCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEhpc3RvcnkpOwoKICAgIHRoaXMudW5kb0l0ZW1zID0gW107CiAgICB0aGlzLnJlZG9JdGVtcyA9IFtdOwogIH0KCiAgX2NyZWF0ZUNsYXNzKEhpc3RvcnksIFt7CiAgICBrZXk6ICJhZGQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFkZChkYXRhKSB7CiAgICAgIHRoaXMudW5kb0l0ZW1zLnB1c2goSlNPTi5zdHJpbmdpZnkoZGF0YSkpOwogICAgICB0aGlzLnJlZG9JdGVtcyA9IFtdOwogICAgfQogIH0sIHsKICAgIGtleTogImNhblVuZG8iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNhblVuZG8oKSB7CiAgICAgIHJldHVybiB0aGlzLnVuZG9JdGVtcy5sZW5ndGggPiAwOwogICAgfQogIH0sIHsKICAgIGtleTogImNhblJlZG8iLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNhblJlZG8oKSB7CiAgICAgIHJldHVybiB0aGlzLnJlZG9JdGVtcy5sZW5ndGggPiAwOwogICAgfQogIH0sIHsKICAgIGtleTogInVuZG8iLAogICAgdmFsdWU6IGZ1bmN0aW9uIHVuZG8oY3VycmVudGQsIGNiKSB7CiAgICAgIHZhciB1bmRvSXRlbXMgPSB0aGlzLnVuZG9JdGVtcywKICAgICAgICAgIHJlZG9JdGVtcyA9IHRoaXMucmVkb0l0ZW1zOwoKICAgICAgaWYgKHRoaXMuY2FuVW5kbygpKSB7CiAgICAgICAgcmVkb0l0ZW1zLnB1c2goSlNPTi5zdHJpbmdpZnkoY3VycmVudGQpKTsKICAgICAgICBjYihKU09OLnBhcnNlKHVuZG9JdGVtcy5wb3AoKSkpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAicmVkbyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVkbyhjdXJyZW50ZCwgY2IpIHsKICAgICAgdmFyIHVuZG9JdGVtcyA9IHRoaXMudW5kb0l0ZW1zLAogICAgICAgICAgcmVkb0l0ZW1zID0gdGhpcy5yZWRvSXRlbXM7CgogICAgICBpZiAodGhpcy5jYW5SZWRvKCkpIHsKICAgICAgICB1bmRvSXRlbXMucHVzaChKU09OLnN0cmluZ2lmeShjdXJyZW50ZCkpOwogICAgICAgIGNiKEpTT04ucGFyc2UocmVkb0l0ZW1zLnBvcCgpKSk7CiAgICAgIH0KICAgIH0KICB9XSk7CgogIHJldHVybiBIaXN0b3J5Owp9KCk7CgpleHBvcnQgeyBIaXN0b3J5IGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["C:/Users/吴建明/Desktop/VisualizationExcle_Demo/src/components/x-spreadsheet/core/history.js"],"names":["History","undoItems","redoItems","data","push","JSON","stringify","length","currentd","cb","canUndo","parse","pop","canRedo"],"mappings":";;;AAAA;IAEqBA,O;AACnB,qBAAc;AAAA;;AACZ,SAAKC,SAAL,GAAiB,EAAjB;AACA,SAAKC,SAAL,GAAiB,EAAjB;AACD;;;;WAED,aAAIC,IAAJ,EAAU;AACR,WAAKF,SAAL,CAAeG,IAAf,CAAoBC,IAAI,CAACC,SAAL,CAAeH,IAAf,CAApB;AACA,WAAKD,SAAL,GAAiB,EAAjB;AACD;;;WAED,mBAAU;AACR,aAAO,KAAKD,SAAL,CAAeM,MAAf,GAAwB,CAA/B;AACD;;;WAED,mBAAU;AACR,aAAO,KAAKL,SAAL,CAAeK,MAAf,GAAwB,CAA/B;AACD;;;WAED,cAAKC,QAAL,EAAeC,EAAf,EAAmB;AAAA,UACTR,SADS,GACgB,IADhB,CACTA,SADS;AAAA,UACEC,SADF,GACgB,IADhB,CACEA,SADF;;AAEjB,UAAI,KAAKQ,OAAL,EAAJ,EAAoB;AAClBR,QAAAA,SAAS,CAACE,IAAV,CAAeC,IAAI,CAACC,SAAL,CAAeE,QAAf,CAAf;AACAC,QAAAA,EAAE,CAACJ,IAAI,CAACM,KAAL,CAAWV,SAAS,CAACW,GAAV,EAAX,CAAD,CAAF;AACD;AACF;;;WAED,cAAKJ,QAAL,EAAeC,EAAf,EAAmB;AAAA,UACTR,SADS,GACgB,IADhB,CACTA,SADS;AAAA,UACEC,SADF,GACgB,IADhB,CACEA,SADF;;AAEjB,UAAI,KAAKW,OAAL,EAAJ,EAAoB;AAClBZ,QAAAA,SAAS,CAACG,IAAV,CAAeC,IAAI,CAACC,SAAL,CAAeE,QAAf,CAAf;AACAC,QAAAA,EAAE,CAACJ,IAAI,CAACM,KAAL,CAAWT,SAAS,CAACU,GAAV,EAAX,CAAD,CAAF;AACD;AACF;;;;;;SAjCkBZ,O","sourcesContent":["// import helper from '../helper';\r\n\r\nexport default class History {\r\n  constructor() {\r\n    this.undoItems = [];\r\n    this.redoItems = [];\r\n  }\r\n\r\n  add(data) {\r\n    this.undoItems.push(JSON.stringify(data));\r\n    this.redoItems = [];\r\n  }\r\n\r\n  canUndo() {\r\n    return this.undoItems.length > 0;\r\n  }\r\n\r\n  canRedo() {\r\n    return this.redoItems.length > 0;\r\n  }\r\n\r\n  undo(currentd, cb) {\r\n    const { undoItems, redoItems } = this;\r\n    if (this.canUndo()) {\r\n      redoItems.push(JSON.stringify(currentd));\r\n      cb(JSON.parse(undoItems.pop()));\r\n    }\r\n  }\r\n\r\n  redo(currentd, cb) {\r\n    const { undoItems, redoItems } = this;\r\n    if (this.canRedo()) {\r\n      undoItems.push(JSON.stringify(currentd));\r\n      cb(JSON.parse(redoItems.pop()));\r\n    }\r\n  }\r\n}\r\n"]}]}