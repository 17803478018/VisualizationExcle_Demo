{"remainingRequest":"C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\src\\components\\x-spreadsheet\\canvas\\draw.js","dependencies":[{"path":"C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\src\\components\\x-spreadsheet\\canvas\\draw.js","mtime":1616639586794},{"path":"C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1616639573358},{"path":"C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1616639572994},{"path":"C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\node_modules\\eslint-loader\\index.js","mtime":1616639576682}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJDOi9Vc2Vycy9cdTU0MzRcdTVFRkFcdTY2MEUvRGVza3RvcC9WaXN1YWxpemF0aW9uRXhjbGVfRGVtby9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSAiQzovVXNlcnMvXHU1NDM0XHU1RUZBXHU2NjBFL0Rlc2t0b3AvVmlzdWFsaXphdGlvbkV4Y2xlX0RlbW8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkM6L1VzZXJzL1x1NTQzNFx1NUVGQVx1NjYwRS9EZXNrdG9wL1Zpc3VhbGl6YXRpb25FeGNsZV9EZW1vL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQzovVXNlcnMvXHU1NDM0XHU1RUZBXHU2NjBFL0Rlc2t0b3AvVmlzdWFsaXphdGlvbkV4Y2xlX0RlbW8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN0cmlrZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGFsaWNzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmJvbGQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsbC5qcyI7CgovKiBnbG9iYWwgd2luZG93ICovCmZ1bmN0aW9uIGRwcigpIHsKICByZXR1cm4gd2luZG93LmRldmljZVBpeGVsUmF0aW8gfHwgMTsKfQoKZnVuY3Rpb24gdGhpbkxpbmVXaWR0aCgpIHsKICByZXR1cm4gZHByKCkgLSAwLjU7Cn0KCmZ1bmN0aW9uIG5weChweCkgewogIHJldHVybiBwYXJzZUludChweCAqIGRwcigpLCAxMCk7Cn0KCmZ1bmN0aW9uIG5weExpbmUocHgpIHsKICB2YXIgbiA9IG5weChweCk7CiAgcmV0dXJuIG4gPiAwID8gbiAtIDAuNSA6IDAuNTsKfQoKdmFyIERyYXdCb3ggPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIERyYXdCb3goeCwgeSwgdywgaCkgewogICAgdmFyIHBhZGRpbmcgPSBhcmd1bWVudHMubGVuZ3RoID4gNCAmJiBhcmd1bWVudHNbNF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s0XSA6IDA7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERyYXdCb3gpOwoKICAgIHRoaXMueCA9IHg7CiAgICB0aGlzLnkgPSB5OwogICAgdGhpcy53aWR0aCA9IHc7CiAgICB0aGlzLmhlaWdodCA9IGg7CiAgICB0aGlzLnBhZGRpbmcgPSBwYWRkaW5nOwogICAgdGhpcy5iZ2NvbG9yID0gJyNmZmZmZmYnOyAvLyBib3JkZXI6IFt3aWR0aCwgc3R5bGUsIGNvbG9yXQoKICAgIHRoaXMuYm9yZGVyVG9wID0gbnVsbDsKICAgIHRoaXMuYm9yZGVyUmlnaHQgPSBudWxsOwogICAgdGhpcy5ib3JkZXJCb3R0b20gPSBudWxsOwogICAgdGhpcy5ib3JkZXJMZWZ0ID0gbnVsbDsKICB9CgogIF9jcmVhdGVDbGFzcyhEcmF3Qm94LCBbewogICAga2V5OiAic2V0Qm9yZGVycyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0Qm9yZGVycyhfcmVmKSB7CiAgICAgIHZhciB0b3AgPSBfcmVmLnRvcCwKICAgICAgICAgIGJvdHRvbSA9IF9yZWYuYm90dG9tLAogICAgICAgICAgbGVmdCA9IF9yZWYubGVmdCwKICAgICAgICAgIHJpZ2h0ID0gX3JlZi5yaWdodDsKICAgICAgaWYgKHRvcCkgdGhpcy5ib3JkZXJUb3AgPSB0b3A7CiAgICAgIGlmIChyaWdodCkgdGhpcy5ib3JkZXJSaWdodCA9IHJpZ2h0OwogICAgICBpZiAoYm90dG9tKSB0aGlzLmJvcmRlckJvdHRvbSA9IGJvdHRvbTsKICAgICAgaWYgKGxlZnQpIHRoaXMuYm9yZGVyTGVmdCA9IGxlZnQ7CiAgICB9CiAgfSwgewogICAga2V5OiAiaW5uZXJXaWR0aCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5uZXJXaWR0aCgpIHsKICAgICAgcmV0dXJuIHRoaXMud2lkdGggLSB0aGlzLnBhZGRpbmcgKiAyIC0gMjsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpbm5lckhlaWdodCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaW5uZXJIZWlnaHQoKSB7CiAgICAgIHJldHVybiB0aGlzLmhlaWdodCAtIHRoaXMucGFkZGluZyAqIDIgLSAyOwogICAgfQogIH0sIHsKICAgIGtleTogInRleHR4IiwKICAgIHZhbHVlOiBmdW5jdGlvbiB0ZXh0eChhbGlnbikgewogICAgICB2YXIgd2lkdGggPSB0aGlzLndpZHRoLAogICAgICAgICAgcGFkZGluZyA9IHRoaXMucGFkZGluZzsKICAgICAgdmFyIHggPSB0aGlzLng7CgogICAgICBpZiAoYWxpZ24gPT09ICdsZWZ0JykgewogICAgICAgIHggKz0gcGFkZGluZzsKICAgICAgfSBlbHNlIGlmIChhbGlnbiA9PT0gJ2NlbnRlcicpIHsKICAgICAgICB4ICs9IHdpZHRoIC8gMjsKICAgICAgfSBlbHNlIGlmIChhbGlnbiA9PT0gJ3JpZ2h0JykgewogICAgICAgIHggKz0gd2lkdGggLSBwYWRkaW5nOwogICAgICB9CgogICAgICByZXR1cm4geDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ0ZXh0eSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdGV4dHkoYWxpZ24sIGgpIHsKICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0LAogICAgICAgICAgcGFkZGluZyA9IHRoaXMucGFkZGluZzsKICAgICAgdmFyIHkgPSB0aGlzLnk7CgogICAgICBpZiAoYWxpZ24gPT09ICd0b3AnKSB7CiAgICAgICAgeSArPSBwYWRkaW5nOwogICAgICB9IGVsc2UgaWYgKGFsaWduID09PSAnbWlkZGxlJykgewogICAgICAgIHkgKz0gaGVpZ2h0IC8gMiAtIGggLyAyOwogICAgICB9IGVsc2UgaWYgKGFsaWduID09PSAnYm90dG9tJykgewogICAgICAgIHkgKz0gaGVpZ2h0IC0gcGFkZGluZyAtIGg7CiAgICAgIH0KCiAgICAgIHJldHVybiB5OwogICAgfQogIH0sIHsKICAgIGtleTogInRvcHh5cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdG9weHlzKCkgewogICAgICB2YXIgeCA9IHRoaXMueCwKICAgICAgICAgIHkgPSB0aGlzLnksCiAgICAgICAgICB3aWR0aCA9IHRoaXMud2lkdGg7CiAgICAgIHJldHVybiBbW3gsIHldLCBbeCArIHdpZHRoLCB5XV07CiAgICB9CiAgfSwgewogICAga2V5OiAicmlnaHR4eXMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJpZ2h0eHlzKCkgewogICAgICB2YXIgeCA9IHRoaXMueCwKICAgICAgICAgIHkgPSB0aGlzLnksCiAgICAgICAgICB3aWR0aCA9IHRoaXMud2lkdGgsCiAgICAgICAgICBoZWlnaHQgPSB0aGlzLmhlaWdodDsKICAgICAgcmV0dXJuIFtbeCArIHdpZHRoLCB5XSwgW3ggKyB3aWR0aCwgeSArIGhlaWdodF1dOwogICAgfQogIH0sIHsKICAgIGtleTogImJvdHRvbXh5cyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYm90dG9teHlzKCkgewogICAgICB2YXIgeCA9IHRoaXMueCwKICAgICAgICAgIHkgPSB0aGlzLnksCiAgICAgICAgICB3aWR0aCA9IHRoaXMud2lkdGgsCiAgICAgICAgICBoZWlnaHQgPSB0aGlzLmhlaWdodDsKICAgICAgcmV0dXJuIFtbeCwgeSArIGhlaWdodF0sIFt4ICsgd2lkdGgsIHkgKyBoZWlnaHRdXTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJsZWZ0eHlzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsZWZ0eHlzKCkgewogICAgICB2YXIgeCA9IHRoaXMueCwKICAgICAgICAgIHkgPSB0aGlzLnksCiAgICAgICAgICBoZWlnaHQgPSB0aGlzLmhlaWdodDsKICAgICAgcmV0dXJuIFtbeCwgeV0sIFt4LCB5ICsgaGVpZ2h0XV07CiAgICB9CiAgfV0pOwoKICByZXR1cm4gRHJhd0JveDsKfSgpOwoKZnVuY3Rpb24gZHJhd0ZvbnRMaW5lKHR5cGUsIHR4LCB0eSwgYWxpZ24sIHZhbGlnbiwgYmxoZWlnaHQsIGJsd2lkdGgpIHsKICB2YXIgZmxvZmZzZXQgPSB7CiAgICB4OiAwLAogICAgeTogMAogIH07CgogIGlmICh0eXBlID09PSAndW5kZXJsaW5lJykgewogICAgaWYgKHZhbGlnbiA9PT0gJ2JvdHRvbScpIHsKICAgICAgZmxvZmZzZXQueSA9IDA7CiAgICB9IGVsc2UgaWYgKHZhbGlnbiA9PT0gJ3RvcCcpIHsKICAgICAgZmxvZmZzZXQueSA9IC0oYmxoZWlnaHQgKyAyKTsKICAgIH0gZWxzZSB7CiAgICAgIGZsb2Zmc2V0LnkgPSAtYmxoZWlnaHQgLyAyOwogICAgfQogIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3N0cmlrZScpIHsKICAgIGlmICh2YWxpZ24gPT09ICdib3R0b20nKSB7CiAgICAgIGZsb2Zmc2V0LnkgPSBibGhlaWdodCAvIDI7CiAgICB9IGVsc2UgaWYgKHZhbGlnbiA9PT0gJ3RvcCcpIHsKICAgICAgZmxvZmZzZXQueSA9IC0oYmxoZWlnaHQgLyAyICsgMik7CiAgICB9CiAgfQoKICBpZiAoYWxpZ24gPT09ICdjZW50ZXInKSB7CiAgICBmbG9mZnNldC54ID0gYmx3aWR0aCAvIDI7CiAgfSBlbHNlIGlmIChhbGlnbiA9PT0gJ3JpZ2h0JykgewogICAgZmxvZmZzZXQueCA9IGJsd2lkdGg7CiAgfQoKICB0aGlzLmxpbmUoW3R4IC0gZmxvZmZzZXQueCwgdHkgLSBmbG9mZnNldC55XSwgW3R4IC0gZmxvZmZzZXQueCArIGJsd2lkdGgsIHR5IC0gZmxvZmZzZXQueV0pOwp9Cgp2YXIgRHJhdyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gRHJhdyhlbCwgd2lkdGgsIGhlaWdodCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERyYXcpOwoKICAgIHRoaXMuZWwgPSBlbDsKICAgIHRoaXMuY3R4ID0gZWwuZ2V0Q29udGV4dCgnMmQnKTsKICAgIHRoaXMucmVzaXplKHdpZHRoLCBoZWlnaHQpOwogICAgdGhpcy5jdHguc2NhbGUoZHByKCksIGRwcigpKTsKICB9CgogIF9jcmVhdGVDbGFzcyhEcmF3LCBbewogICAga2V5OiAicmVzaXplIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXNpemUod2lkdGgsIGhlaWdodCkgewogICAgICAvLyBjb25zb2xlLmxvZygnZHByOicsIGRwcik7CiAgICAgIHRoaXMuZWwuc3R5bGUud2lkdGggPSAiIi5jb25jYXQod2lkdGgsICJweCIpOwogICAgICB0aGlzLmVsLnN0eWxlLmhlaWdodCA9ICIiLmNvbmNhdChoZWlnaHQsICJweCIpOwogICAgICB0aGlzLmVsLndpZHRoID0gbnB4KHdpZHRoKTsKICAgICAgdGhpcy5lbC5oZWlnaHQgPSBucHgoaGVpZ2h0KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjbGVhciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXIoKSB7CiAgICAgIHZhciBfdGhpcyRlbCA9IHRoaXMuZWwsCiAgICAgICAgICB3aWR0aCA9IF90aGlzJGVsLndpZHRoLAogICAgICAgICAgaGVpZ2h0ID0gX3RoaXMkZWwuaGVpZ2h0OwogICAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgd2lkdGgsIGhlaWdodCk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH0sIHsKICAgIGtleTogImF0dHIiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGF0dHIob3B0aW9ucykgewogICAgICBPYmplY3QuYXNzaWduKHRoaXMuY3R4LCBvcHRpb25zKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfSwgewogICAga2V5OiAic2F2ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2F2ZSgpIHsKICAgICAgdGhpcy5jdHguc2F2ZSgpOwogICAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVzdG9yZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVzdG9yZSgpIHsKICAgICAgdGhpcy5jdHgucmVzdG9yZSgpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJiZWdpblBhdGgiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGJlZ2luUGF0aCgpIHsKICAgICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH0sIHsKICAgIGtleTogInRyYW5zbGF0ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdHJhbnNsYXRlKHgsIHkpIHsKICAgICAgdGhpcy5jdHgudHJhbnNsYXRlKG5weCh4KSwgbnB4KHkpKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfSwgewogICAga2V5OiAic2NhbGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNjYWxlKHgsIHkpIHsKICAgICAgdGhpcy5jdHguc2NhbGUoeCwgeSk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH0sIHsKICAgIGtleTogImNsZWFyUmVjdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXJSZWN0KHgsIHksIHcsIGgpIHsKICAgICAgdGhpcy5jdHguY2xlYXJSZWN0KHgsIHksIHcsIGgpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmaWxsUmVjdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmlsbFJlY3QoeCwgeSwgdywgaCkgewogICAgICB0aGlzLmN0eC5maWxsUmVjdChucHgoeCkgLSAwLjUsIG5weCh5KSAtIDAuNSwgbnB4KHcpLCBucHgoaCkpOwogICAgICByZXR1cm4gdGhpczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJmaWxsVGV4dCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZmlsbFRleHQodGV4dCwgeCwgeSkgewogICAgICB0aGlzLmN0eC5maWxsVGV4dCh0ZXh0LCBucHgoeCksIG5weCh5KSk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogICAgLyoNCiAgICAgIHR4dDogcmVuZGVyIHRleHQNCiAgICAgIGJveDogRHJhd0JveA0KICAgICAgYXR0cjogew0KICAgICAgICBhbGlnbjogbGVmdCB8IGNlbnRlciB8IHJpZ2h0DQogICAgICAgIHZhbGlnbjogdG9wIHwgbWlkZGxlIHwgYm90dG9tDQogICAgICAgIGNvbG9yOiAnIzMzMzMzMycsDQogICAgICAgIHN0cmlrZTogZmFsc2UsDQogICAgICAgIGZvbnQ6IHsNCiAgICAgICAgICBuYW1lOiAnQXJpYWwnLA0KICAgICAgICAgIHNpemU6IDE0LA0KICAgICAgICAgIGJvbGQ6IGZhbHNlLA0KICAgICAgICAgIGl0YWxpYzogZmFsc2UsDQogICAgICAgIH0NCiAgICAgIH0NCiAgICAgIHRleHRXcmFwOiB0ZXh0IHdyYXBwaW5nDQogICAgKi8KCiAgfSwgewogICAga2V5OiAidGV4dCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdGV4dChtdHh0LCBib3gpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBhdHRyID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB7fTsKICAgICAgdmFyIHRleHRXcmFwID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiB0cnVlOwogICAgICB2YXIgY3R4ID0gdGhpcy5jdHg7CiAgICAgIHZhciBhbGlnbiA9IGF0dHIuYWxpZ24sCiAgICAgICAgICB2YWxpZ24gPSBhdHRyLnZhbGlnbiwKICAgICAgICAgIGZvbnQgPSBhdHRyLmZvbnQsCiAgICAgICAgICBjb2xvciA9IGF0dHIuY29sb3IsCiAgICAgICAgICBzdHJpa2UgPSBhdHRyLnN0cmlrZSwKICAgICAgICAgIHVuZGVybGluZSA9IGF0dHIudW5kZXJsaW5lOwogICAgICB2YXIgdHggPSBib3gudGV4dHgoYWxpZ24pOwogICAgICBjdHguc2F2ZSgpOwogICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgIHRoaXMuYXR0cih7CiAgICAgICAgdGV4dEFsaWduOiBhbGlnbiwKICAgICAgICB0ZXh0QmFzZWxpbmU6IHZhbGlnbiwKICAgICAgICBmb250OiAiIi5jb25jYXQoZm9udC5pdGFsaWMgPyAnaXRhbGljJyA6ICcnLCAiICIpLmNvbmNhdChmb250LmJvbGQgPyAnYm9sZCcgOiAnJywgIiAiKS5jb25jYXQobnB4KGZvbnQuc2l6ZSksICJweCAiKS5jb25jYXQoZm9udC5uYW1lKSwKICAgICAgICBmaWxsU3R5bGU6IGNvbG9yLAogICAgICAgIHN0cm9rZVN0eWxlOiBjb2xvcgogICAgICB9KTsKICAgICAgdmFyIHR4dHMgPSAiIi5jb25jYXQobXR4dCkuc3BsaXQoJ1xuJyk7CiAgICAgIHZhciBiaXcgPSBib3guaW5uZXJXaWR0aCgpOwogICAgICB2YXIgbnR4dHMgPSBbXTsKICAgICAgdHh0cy5mb3JFYWNoKGZ1bmN0aW9uIChpdCkgewogICAgICAgIHZhciB0eHRXaWR0aCA9IGN0eC5tZWFzdXJlVGV4dChpdCkud2lkdGg7CgogICAgICAgIGlmICh0ZXh0V3JhcCAmJiB0eHRXaWR0aCA+IG5weChiaXcpKSB7CiAgICAgICAgICB2YXIgdGV4dExpbmUgPSB7CiAgICAgICAgICAgIHc6IDAsCiAgICAgICAgICAgIGxlbjogMCwKICAgICAgICAgICAgc3RhcnQ6IDAKICAgICAgICAgIH07CgogICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpdC5sZW5ndGg7IGkgKz0gMSkgewogICAgICAgICAgICBpZiAodGV4dExpbmUudyA+PSBucHgoYml3KSkgewogICAgICAgICAgICAgIG50eHRzLnB1c2goaXQuc3Vic3RyKHRleHRMaW5lLnN0YXJ0LCB0ZXh0TGluZS5sZW4pKTsKICAgICAgICAgICAgICB0ZXh0TGluZSA9IHsKICAgICAgICAgICAgICAgIHc6IDAsCiAgICAgICAgICAgICAgICBsZW46IDAsCiAgICAgICAgICAgICAgICBzdGFydDogaQogICAgICAgICAgICAgIH07CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRleHRMaW5lLmxlbiArPSAxOwogICAgICAgICAgICB0ZXh0TGluZS53ICs9IGN0eC5tZWFzdXJlVGV4dChpdFtpXSkud2lkdGggKyAxOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICh0ZXh0TGluZS5sZW4gPiAwKSB7CiAgICAgICAgICAgIG50eHRzLnB1c2goaXQuc3Vic3RyKHRleHRMaW5lLnN0YXJ0LCB0ZXh0TGluZS5sZW4pKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgbnR4dHMucHVzaChpdCk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdmFyIHR4dEhlaWdodCA9IChudHh0cy5sZW5ndGggLSAxKSAqIChmb250LnNpemUgKyAyKTsKICAgICAgdmFyIHR5ID0gYm94LnRleHR5KHZhbGlnbiwgdHh0SGVpZ2h0KTsKICAgICAgbnR4dHMuZm9yRWFjaChmdW5jdGlvbiAodHh0KSB7CiAgICAgICAgdmFyIHR4dFdpZHRoID0gY3R4Lm1lYXN1cmVUZXh0KHR4dCkud2lkdGg7CgogICAgICAgIF90aGlzLmZpbGxUZXh0KHR4dCwgdHgsIHR5KTsKCiAgICAgICAgaWYgKHN0cmlrZSkgewogICAgICAgICAgZHJhd0ZvbnRMaW5lLmNhbGwoX3RoaXMsICdzdHJpa2UnLCB0eCwgdHksIGFsaWduLCB2YWxpZ24sIGZvbnQuc2l6ZSwgdHh0V2lkdGgpOwogICAgICAgIH0KCiAgICAgICAgaWYgKHVuZGVybGluZSkgewogICAgICAgICAgZHJhd0ZvbnRMaW5lLmNhbGwoX3RoaXMsICd1bmRlcmxpbmUnLCB0eCwgdHksIGFsaWduLCB2YWxpZ24sIGZvbnQuc2l6ZSwgdHh0V2lkdGgpOwogICAgICAgIH0KCiAgICAgICAgdHkgKz0gZm9udC5zaXplICsgMjsKICAgICAgfSk7CiAgICAgIGN0eC5yZXN0b3JlKCk7CiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH0sIHsKICAgIGtleTogImJvcmRlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYm9yZGVyKHN0eWxlLCBjb2xvcikgewogICAgICB2YXIgY3R4ID0gdGhpcy5jdHg7CiAgICAgIGN0eC5saW5lV2lkdGggPSB0aGluTGluZVdpZHRoOwogICAgICBjdHguc3Ryb2tlU3R5bGUgPSBjb2xvcjsgLy8gY29uc29sZS5sb2coJ3N0eWxlOicsIHN0eWxlKTsKCiAgICAgIGlmIChzdHlsZSA9PT0gJ21lZGl1bScpIHsKICAgICAgICBjdHgubGluZVdpZHRoID0gbnB4KDIpIC0gMC41OwogICAgICB9IGVsc2UgaWYgKHN0eWxlID09PSAndGhpY2snKSB7CiAgICAgICAgY3R4LmxpbmVXaWR0aCA9IG5weCgzKTsKICAgICAgfSBlbHNlIGlmIChzdHlsZSA9PT0gJ2Rhc2hlZCcpIHsKICAgICAgICBjdHguc2V0TGluZURhc2goW25weCgzKSwgbnB4KDIpXSk7CiAgICAgIH0gZWxzZSBpZiAoc3R5bGUgPT09ICdkb3R0ZWQnKSB7CiAgICAgICAgY3R4LnNldExpbmVEYXNoKFtucHgoMSksIG5weCgxKV0pOwogICAgICB9IGVsc2UgaWYgKHN0eWxlID09PSAnZG91YmxlJykgewogICAgICAgIGN0eC5zZXRMaW5lRGFzaChbbnB4KDIpLCAwXSk7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzOwogICAgfQogIH0sIHsKICAgIGtleTogImxpbmUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGxpbmUoKSB7CiAgICAgIHZhciBjdHggPSB0aGlzLmN0eDsKCiAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkgewogICAgICAgIGN0eC5iZWdpblBhdGgoKTsKCiAgICAgICAgdmFyIF9yZWYyID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwID8gdW5kZWZpbmVkIDogYXJndW1lbnRzWzBdLAogICAgICAgICAgICBfcmVmMyA9IF9zbGljZWRUb0FycmF5KF9yZWYyLCAyKSwKICAgICAgICAgICAgeCA9IF9yZWYzWzBdLAogICAgICAgICAgICB5ID0gX3JlZjNbMV07CgogICAgICAgIGN0eC5tb3ZlVG8obnB4TGluZSh4KSwgbnB4TGluZSh5KSk7CgogICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgICB2YXIgX3JlZjQgPSBpIDwgMCB8fCBhcmd1bWVudHMubGVuZ3RoIDw9IGkgPyB1bmRlZmluZWQgOiBhcmd1bWVudHNbaV0sCiAgICAgICAgICAgICAgX3JlZjUgPSBfc2xpY2VkVG9BcnJheShfcmVmNCwgMiksCiAgICAgICAgICAgICAgeDEgPSBfcmVmNVswXSwKICAgICAgICAgICAgICB5MSA9IF9yZWY1WzFdOwoKICAgICAgICAgIGN0eC5saW5lVG8obnB4TGluZSh4MSksIG5weExpbmUoeTEpKTsKICAgICAgICB9CgogICAgICAgIGN0eC5zdHJva2UoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfSwgewogICAga2V5OiAic3Ryb2tlQm9yZGVycyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3Ryb2tlQm9yZGVycyhib3gpIHsKICAgICAgdmFyIGN0eCA9IHRoaXMuY3R4OwogICAgICBjdHguc2F2ZSgpOyAvLyBib3JkZXIKCiAgICAgIHZhciBib3JkZXJUb3AgPSBib3guYm9yZGVyVG9wLAogICAgICAgICAgYm9yZGVyUmlnaHQgPSBib3guYm9yZGVyUmlnaHQsCiAgICAgICAgICBib3JkZXJCb3R0b20gPSBib3guYm9yZGVyQm90dG9tLAogICAgICAgICAgYm9yZGVyTGVmdCA9IGJveC5ib3JkZXJMZWZ0OwoKICAgICAgaWYgKGJvcmRlclRvcCkgewogICAgICAgIHRoaXMuYm9yZGVyLmFwcGx5KHRoaXMsIF90b0NvbnN1bWFibGVBcnJheShib3JkZXJUb3ApKTsgLy8gY29uc29sZS5sb2coJ2JveC50b3B4eXM6JywgYm94LnRvcHh5cygpKTsKCiAgICAgICAgdGhpcy5saW5lLmFwcGx5KHRoaXMsIF90b0NvbnN1bWFibGVBcnJheShib3gudG9weHlzKCkpKTsKICAgICAgfQoKICAgICAgaWYgKGJvcmRlclJpZ2h0KSB7CiAgICAgICAgdGhpcy5ib3JkZXIuYXBwbHkodGhpcywgX3RvQ29uc3VtYWJsZUFycmF5KGJvcmRlclJpZ2h0KSk7CiAgICAgICAgdGhpcy5saW5lLmFwcGx5KHRoaXMsIF90b0NvbnN1bWFibGVBcnJheShib3gucmlnaHR4eXMoKSkpOwogICAgICB9CgogICAgICBpZiAoYm9yZGVyQm90dG9tKSB7CiAgICAgICAgdGhpcy5ib3JkZXIuYXBwbHkodGhpcywgX3RvQ29uc3VtYWJsZUFycmF5KGJvcmRlckJvdHRvbSkpOwogICAgICAgIHRoaXMubGluZS5hcHBseSh0aGlzLCBfdG9Db25zdW1hYmxlQXJyYXkoYm94LmJvdHRvbXh5cygpKSk7CiAgICAgIH0KCiAgICAgIGlmIChib3JkZXJMZWZ0KSB7CiAgICAgICAgdGhpcy5ib3JkZXIuYXBwbHkodGhpcywgX3RvQ29uc3VtYWJsZUFycmF5KGJvcmRlckxlZnQpKTsKICAgICAgICB0aGlzLmxpbmUuYXBwbHkodGhpcywgX3RvQ29uc3VtYWJsZUFycmF5KGJveC5sZWZ0eHlzKCkpKTsKICAgICAgfQoKICAgICAgY3R4LnJlc3RvcmUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkcm9wZG93biIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZHJvcGRvd24oYm94KSB7CiAgICAgIHZhciBjdHggPSB0aGlzLmN0eDsKICAgICAgdmFyIHggPSBib3gueCwKICAgICAgICAgIHkgPSBib3gueSwKICAgICAgICAgIHdpZHRoID0gYm94LndpZHRoLAogICAgICAgICAgaGVpZ2h0ID0gYm94LmhlaWdodDsKICAgICAgdmFyIHN4ID0geCArIHdpZHRoIC0gMTU7CiAgICAgIHZhciBzeSA9IHkgKyBoZWlnaHQgLSAxNTsKICAgICAgY3R4LnNhdmUoKTsKICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICBjdHgubW92ZVRvKG5weChzeCksIG5weChzeSkpOwogICAgICBjdHgubGluZVRvKG5weChzeCArIDgpLCBucHgoc3kpKTsKICAgICAgY3R4LmxpbmVUbyhucHgoc3ggKyA0KSwgbnB4KHN5ICsgNikpOwogICAgICBjdHguY2xvc2VQYXRoKCk7CiAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgwLCAwLCAwLCAuNDUpJzsKICAgICAgY3R4LmZpbGwoKTsKICAgICAgY3R4LnJlc3RvcmUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJlcnJvciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZXJyb3IoYm94KSB7CiAgICAgIHZhciBjdHggPSB0aGlzLmN0eDsKICAgICAgdmFyIHggPSBib3gueCwKICAgICAgICAgIHkgPSBib3gueSwKICAgICAgICAgIHdpZHRoID0gYm94LndpZHRoOwogICAgICB2YXIgc3ggPSB4ICsgd2lkdGggLSAxOwogICAgICBjdHguc2F2ZSgpOwogICAgICBjdHguYmVnaW5QYXRoKCk7CiAgICAgIGN0eC5tb3ZlVG8obnB4KHN4IC0gOCksIG5weCh5IC0gMSkpOwogICAgICBjdHgubGluZVRvKG5weChzeCksIG5weCh5IC0gMSkpOwogICAgICBjdHgubGluZVRvKG5weChzeCksIG5weCh5ICsgOCkpOwogICAgICBjdHguY2xvc2VQYXRoKCk7CiAgICAgIGN0eC5maWxsU3R5bGUgPSAncmdiYSgyNTUsIDAsIDAsIC42NSknOwogICAgICBjdHguZmlsbCgpOwogICAgICBjdHgucmVzdG9yZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogImZyb3plbiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZnJvemVuKGJveCkgewogICAgICB2YXIgY3R4ID0gdGhpcy5jdHg7CiAgICAgIHZhciB4ID0gYm94LngsCiAgICAgICAgICB5ID0gYm94LnksCiAgICAgICAgICB3aWR0aCA9IGJveC53aWR0aDsKICAgICAgdmFyIHN4ID0geCArIHdpZHRoIC0gMTsKICAgICAgY3R4LnNhdmUoKTsKICAgICAgY3R4LmJlZ2luUGF0aCgpOwogICAgICBjdHgubW92ZVRvKG5weChzeCAtIDgpLCBucHgoeSAtIDEpKTsKICAgICAgY3R4LmxpbmVUbyhucHgoc3gpLCBucHgoeSAtIDEpKTsKICAgICAgY3R4LmxpbmVUbyhucHgoc3gpLCBucHgoeSArIDgpKTsKICAgICAgY3R4LmNsb3NlUGF0aCgpOwogICAgICBjdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwgMjU1LCAwLCAuODUpJzsKICAgICAgY3R4LmZpbGwoKTsKICAgICAgY3R4LnJlc3RvcmUoKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZWN0KGJveCwgZHRleHRjYikgewogICAgICB2YXIgY3R4ID0gdGhpcy5jdHg7CiAgICAgIHZhciB4ID0gYm94LngsCiAgICAgICAgICB5ID0gYm94LnksCiAgICAgICAgICB3aWR0aCA9IGJveC53aWR0aCwKICAgICAgICAgIGhlaWdodCA9IGJveC5oZWlnaHQsCiAgICAgICAgICBiZ2NvbG9yID0gYm94LmJnY29sb3I7CiAgICAgIGN0eC5zYXZlKCk7CiAgICAgIGN0eC5iZWdpblBhdGgoKTsKICAgICAgY3R4LmZpbGxTdHlsZSA9IGJnY29sb3IgfHwgJyNmZmYnOwogICAgICBjdHgucmVjdChucHhMaW5lKHggKyAxKSwgbnB4TGluZSh5ICsgMSksIG5weCh3aWR0aCAtIDIpLCBucHgoaGVpZ2h0IC0gMikpOwogICAgICBjdHguY2xpcCgpOwogICAgICBjdHguZmlsbCgpOwogICAgICBkdGV4dGNiKCk7CiAgICAgIGN0eC5yZXN0b3JlKCk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gRHJhdzsKfSgpOwoKZXhwb3J0IGRlZmF1bHQge307CmV4cG9ydCB7IERyYXcsIERyYXdCb3gsIHRoaW5MaW5lV2lkdGgsIG5weCB9Ow=="},{"version":3,"sources":["C:/Users/吴建明/Desktop/VisualizationExcle_Demo/src/components/x-spreadsheet/canvas/draw.js"],"names":["dpr","window","devicePixelRatio","thinLineWidth","npx","px","parseInt","npxLine","n","DrawBox","x","y","w","h","padding","width","height","bgcolor","borderTop","borderRight","borderBottom","borderLeft","top","bottom","left","right","align","drawFontLine","type","tx","ty","valign","blheight","blwidth","floffset","line","Draw","el","ctx","getContext","resize","scale","style","clearRect","options","Object","assign","save","beginPath","restore","translate","fillRect","text","fillText","mtxt","box","attr","textWrap","font","color","strike","underline","textx","textAlign","textBaseline","italic","bold","size","name","fillStyle","strokeStyle","txts","split","biw","innerWidth","ntxts","forEach","it","txtWidth","measureText","textLine","len","start","i","length","push","substr","txtHeight","texty","txt","call","lineWidth","setLineDash","moveTo","x1","y1","lineTo","stroke","border","topxys","rightxys","bottomxys","leftxys","sx","sy","closePath","fill","dtextcb","rect","clip"],"mappings":"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","sourcesContent":["/* global window */\r\nfunction dpr() {\r\n  return window.devicePixelRatio || 1;\r\n}\r\n\r\nfunction thinLineWidth() {\r\n  return dpr() - 0.5;\r\n}\r\n\r\nfunction npx(px) {\r\n  return parseInt(px * dpr(), 10);\r\n}\r\n\r\nfunction npxLine(px) {\r\n  const n = npx(px);\r\n  return n > 0 ? n - 0.5 : 0.5;\r\n}\r\n\r\nclass DrawBox {\r\n  constructor(x, y, w, h, padding = 0) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.width = w;\r\n    this.height = h;\r\n    this.padding = padding;\r\n    this.bgcolor = '#ffffff';\r\n    // border: [width, style, color]\r\n    this.borderTop = null;\r\n    this.borderRight = null;\r\n    this.borderBottom = null;\r\n    this.borderLeft = null;\r\n  }\r\n\r\n  setBorders({\r\n    top, bottom, left, right,\r\n  }) {\r\n    if (top) this.borderTop = top;\r\n    if (right) this.borderRight = right;\r\n    if (bottom) this.borderBottom = bottom;\r\n    if (left) this.borderLeft = left;\r\n  }\r\n\r\n  innerWidth() {\r\n    return this.width - (this.padding * 2) - 2;\r\n  }\r\n\r\n  innerHeight() {\r\n    return this.height - (this.padding * 2) - 2;\r\n  }\r\n\r\n  textx(align) {\r\n    const { width, padding } = this;\r\n    let { x } = this;\r\n    if (align === 'left') {\r\n      x += padding;\r\n    } else if (align === 'center') {\r\n      x += width / 2;\r\n    } else if (align === 'right') {\r\n      x += width - padding;\r\n    }\r\n    return x;\r\n  }\r\n\r\n  texty(align, h) {\r\n    const { height, padding } = this;\r\n    let { y } = this;\r\n    if (align === 'top') {\r\n      y += padding;\r\n    } else if (align === 'middle') {\r\n      y += height / 2 - h / 2;\r\n    } else if (align === 'bottom') {\r\n      y += height - padding - h;\r\n    }\r\n    return y;\r\n  }\r\n\r\n  topxys() {\r\n    const { x, y, width } = this;\r\n    return [[x, y], [x + width, y]];\r\n  }\r\n\r\n  rightxys() {\r\n    const {\r\n      x, y, width, height,\r\n    } = this;\r\n    return [[x + width, y], [x + width, y + height]];\r\n  }\r\n\r\n  bottomxys() {\r\n    const {\r\n      x, y, width, height,\r\n    } = this;\r\n    return [[x, y + height], [x + width, y + height]];\r\n  }\r\n\r\n  leftxys() {\r\n    const {\r\n      x, y, height,\r\n    } = this;\r\n    return [[x, y], [x, y + height]];\r\n  }\r\n}\r\n\r\nfunction drawFontLine(type, tx, ty, align, valign, blheight, blwidth) {\r\n  const floffset = { x: 0, y: 0 };\r\n  if (type === 'underline') {\r\n    if (valign === 'bottom') {\r\n      floffset.y = 0;\r\n    } else if (valign === 'top') {\r\n      floffset.y = -(blheight + 2);\r\n    } else {\r\n      floffset.y = -blheight / 2;\r\n    }\r\n  } else if (type === 'strike') {\r\n    if (valign === 'bottom') {\r\n      floffset.y = blheight / 2;\r\n    } else if (valign === 'top') {\r\n      floffset.y = -((blheight / 2) + 2);\r\n    }\r\n  }\r\n\r\n  if (align === 'center') {\r\n    floffset.x = blwidth / 2;\r\n  } else if (align === 'right') {\r\n    floffset.x = blwidth;\r\n  }\r\n  this.line(\r\n    [tx - floffset.x, ty - floffset.y],\r\n    [tx - floffset.x + blwidth, ty - floffset.y],\r\n  );\r\n}\r\n\r\nclass Draw {\r\n  constructor(el, width, height) {\r\n    this.el = el;\r\n    this.ctx = el.getContext('2d');\r\n    this.resize(width, height);\r\n    this.ctx.scale(dpr(), dpr());\r\n  }\r\n\r\n  resize(width, height) {\r\n    // console.log('dpr:', dpr);\r\n    this.el.style.width = `${width}px`;\r\n    this.el.style.height = `${height}px`;\r\n    this.el.width = npx(width);\r\n    this.el.height = npx(height);\r\n  }\r\n\r\n  clear() {\r\n    const { width, height } = this.el;\r\n    this.ctx.clearRect(0, 0, width, height);\r\n    return this;\r\n  }\r\n\r\n  attr(options) {\r\n    Object.assign(this.ctx, options);\r\n    return this;\r\n  }\r\n\r\n  save() {\r\n    this.ctx.save();\r\n    this.ctx.beginPath();\r\n    return this;\r\n  }\r\n\r\n  restore() {\r\n    this.ctx.restore();\r\n    return this;\r\n  }\r\n\r\n  beginPath() {\r\n    this.ctx.beginPath();\r\n    return this;\r\n  }\r\n\r\n  translate(x, y) {\r\n    this.ctx.translate(npx(x), npx(y));\r\n    return this;\r\n  }\r\n\r\n  scale(x, y) {\r\n    this.ctx.scale(x, y);\r\n    return this;\r\n  }\r\n\r\n  clearRect(x, y, w, h) {\r\n    this.ctx.clearRect(x, y, w, h);\r\n    return this;\r\n  }\r\n\r\n  fillRect(x, y, w, h) {\r\n    this.ctx.fillRect(npx(x) - 0.5, npx(y) - 0.5, npx(w), npx(h));\r\n    return this;\r\n  }\r\n\r\n  fillText(text, x, y) {\r\n    this.ctx.fillText(text, npx(x), npx(y));\r\n    return this;\r\n  }\r\n\r\n  /*\r\n    txt: render text\r\n    box: DrawBox\r\n    attr: {\r\n      align: left | center | right\r\n      valign: top | middle | bottom\r\n      color: '#333333',\r\n      strike: false,\r\n      font: {\r\n        name: 'Arial',\r\n        size: 14,\r\n        bold: false,\r\n        italic: false,\r\n      }\r\n    }\r\n    textWrap: text wrapping\r\n  */\r\n  text(mtxt, box, attr = {}, textWrap = true) {\r\n    const { ctx } = this;\r\n    const {\r\n      align, valign, font, color, strike, underline,\r\n    } = attr;\r\n    const tx = box.textx(align);\r\n    ctx.save();\r\n    ctx.beginPath();\r\n    this.attr({\r\n      textAlign: align,\r\n      textBaseline: valign,\r\n      font: `${font.italic ? 'italic' : ''} ${font.bold ? 'bold' : ''} ${npx(font.size)}px ${font.name}`,\r\n      fillStyle: color,\r\n      strokeStyle: color,\r\n    });\r\n    const txts = `${mtxt}`.split('\\n');\r\n    const biw = box.innerWidth();\r\n    const ntxts = [];\r\n    txts.forEach((it) => {\r\n      const txtWidth = ctx.measureText(it).width;\r\n      if (textWrap && txtWidth > npx(biw)) {\r\n        let textLine = { w: 0, len: 0, start: 0 };\r\n        for (let i = 0; i < it.length; i += 1) {\r\n          if (textLine.w >= npx(biw)) {\r\n            ntxts.push(it.substr(textLine.start, textLine.len));\r\n            textLine = { w: 0, len: 0, start: i };\r\n          }\r\n          textLine.len += 1;\r\n          textLine.w += ctx.measureText(it[i]).width + 1;\r\n        }\r\n        if (textLine.len > 0) {\r\n          ntxts.push(it.substr(textLine.start, textLine.len));\r\n        }\r\n      } else {\r\n        ntxts.push(it);\r\n      }\r\n    });\r\n    const txtHeight = (ntxts.length - 1) * (font.size + 2);\r\n    let ty = box.texty(valign, txtHeight);\r\n    ntxts.forEach((txt) => {\r\n      const txtWidth = ctx.measureText(txt).width;\r\n      this.fillText(txt, tx, ty);\r\n      if (strike) {\r\n        drawFontLine.call(this, 'strike', tx, ty, align, valign, font.size, txtWidth);\r\n      }\r\n      if (underline) {\r\n        drawFontLine.call(this, 'underline', tx, ty, align, valign, font.size, txtWidth);\r\n      }\r\n      ty += font.size + 2;\r\n    });\r\n    ctx.restore();\r\n    return this;\r\n  }\r\n\r\n  border(style, color) {\r\n    const { ctx } = this;\r\n    ctx.lineWidth = thinLineWidth;\r\n    ctx.strokeStyle = color;\r\n    // console.log('style:', style);\r\n    if (style === 'medium') {\r\n      ctx.lineWidth = npx(2) - 0.5;\r\n    } else if (style === 'thick') {\r\n      ctx.lineWidth = npx(3);\r\n    } else if (style === 'dashed') {\r\n      ctx.setLineDash([npx(3), npx(2)]);\r\n    } else if (style === 'dotted') {\r\n      ctx.setLineDash([npx(1), npx(1)]);\r\n    } else if (style === 'double') {\r\n      ctx.setLineDash([npx(2), 0]);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  line(...xys) {\r\n    const { ctx } = this;\r\n    if (xys.length > 1) {\r\n      ctx.beginPath();\r\n      const [x, y] = xys[0];\r\n      ctx.moveTo(npxLine(x), npxLine(y));\r\n      for (let i = 1; i < xys.length; i += 1) {\r\n        const [x1, y1] = xys[i];\r\n        ctx.lineTo(npxLine(x1), npxLine(y1));\r\n      }\r\n      ctx.stroke();\r\n    }\r\n    return this;\r\n  }\r\n\r\n  strokeBorders(box) {\r\n    const { ctx } = this;\r\n    ctx.save();\r\n    // border\r\n    const {\r\n      borderTop, borderRight, borderBottom, borderLeft,\r\n    } = box;\r\n    if (borderTop) {\r\n      this.border(...borderTop);\r\n      // console.log('box.topxys:', box.topxys());\r\n      this.line(...box.topxys());\r\n    }\r\n    if (borderRight) {\r\n      this.border(...borderRight);\r\n      this.line(...box.rightxys());\r\n    }\r\n    if (borderBottom) {\r\n      this.border(...borderBottom);\r\n      this.line(...box.bottomxys());\r\n    }\r\n    if (borderLeft) {\r\n      this.border(...borderLeft);\r\n      this.line(...box.leftxys());\r\n    }\r\n    ctx.restore();\r\n  }\r\n\r\n  dropdown(box) {\r\n    const { ctx } = this;\r\n    const {\r\n      x, y, width, height,\r\n    } = box;\r\n    const sx = x + width - 15;\r\n    const sy = y + height - 15;\r\n    ctx.save();\r\n    ctx.beginPath();\r\n    ctx.moveTo(npx(sx), npx(sy));\r\n    ctx.lineTo(npx(sx + 8), npx(sy));\r\n    ctx.lineTo(npx(sx + 4), npx(sy + 6));\r\n    ctx.closePath();\r\n    ctx.fillStyle = 'rgba(0, 0, 0, .45)';\r\n    ctx.fill();\r\n    ctx.restore();\r\n  }\r\n\r\n  error(box) {\r\n    const { ctx } = this;\r\n    const { x, y, width } = box;\r\n    const sx = x + width - 1;\r\n    ctx.save();\r\n    ctx.beginPath();\r\n    ctx.moveTo(npx(sx - 8), npx(y - 1));\r\n    ctx.lineTo(npx(sx), npx(y - 1));\r\n    ctx.lineTo(npx(sx), npx(y + 8));\r\n    ctx.closePath();\r\n    ctx.fillStyle = 'rgba(255, 0, 0, .65)';\r\n    ctx.fill();\r\n    ctx.restore();\r\n  }\r\n\r\n  frozen(box) {\r\n    const { ctx } = this;\r\n    const { x, y, width } = box;\r\n    const sx = x + width - 1;\r\n    ctx.save();\r\n    ctx.beginPath();\r\n    ctx.moveTo(npx(sx - 8), npx(y - 1));\r\n    ctx.lineTo(npx(sx), npx(y - 1));\r\n    ctx.lineTo(npx(sx), npx(y + 8));\r\n    ctx.closePath();\r\n    ctx.fillStyle = 'rgba(0, 255, 0, .85)';\r\n    ctx.fill();\r\n    ctx.restore();\r\n  }\r\n\r\n  rect(box, dtextcb) {\r\n    const { ctx } = this;\r\n    const {\r\n      x, y, width, height, bgcolor,\r\n    } = box;\r\n    ctx.save();\r\n    ctx.beginPath();\r\n    ctx.fillStyle = bgcolor || '#fff';\r\n    ctx.rect(npxLine(x + 1), npxLine(y + 1), npx(width - 2), npx(height - 2));\r\n    ctx.clip();\r\n    ctx.fill();\r\n    dtextcb();\r\n    ctx.restore();\r\n  }\r\n}\r\n\r\nexport default {};\r\nexport {\r\n  Draw,\r\n  DrawBox,\r\n  thinLineWidth,\r\n  npx,\r\n};\r\n"]}]}