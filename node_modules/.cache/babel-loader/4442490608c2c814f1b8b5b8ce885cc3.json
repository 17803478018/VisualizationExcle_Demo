{"remainingRequest":"D:\\代码\\del_demo\\VisualizationExcle_Demo\\node_modules\\babel-loader\\lib\\index.js!D:\\代码\\del_demo\\VisualizationExcle_Demo\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\代码\\del_demo\\VisualizationExcle_Demo\\src\\components\\x-spreadsheet\\component\\form_field.js","dependencies":[{"path":"D:\\代码\\del_demo\\VisualizationExcle_Demo\\src\\components\\x-spreadsheet\\component\\form_field.js","mtime":1614915429337},{"path":"D:\\代码\\del_demo\\VisualizationExcle_Demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1596536485880},{"path":"D:\\代码\\del_demo\\VisualizationExcle_Demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1606828682259},{"path":"D:\\代码\\del_demo\\VisualizationExcle_Demo\\node_modules\\eslint-loader\\index.js","mtime":1603719226989}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJEOi9cdTRFRTNcdTc4MDEvZGVsX2RlbW8vVmlzdWFsaXphdGlvbkV4Y2xlX0RlbW8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJEOi9cdTRFRTNcdTc4MDEvZGVsX2RlbW8vVmlzdWFsaXphdGlvbkV4Y2xlX0RlbW8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IHsgaCB9IGZyb20gJy4vZWxlbWVudCc7CmltcG9ydCB7IGNzc1ByZWZpeCB9IGZyb20gJy4uL2NvbmZpZyc7CmltcG9ydCB7IHQgfSBmcm9tICcuLi9sb2NhbGUvbG9jYWxlJzsKdmFyIHBhdHRlcm5zID0gewogIG51bWJlcjogLyheXGQrJCl8KF5cZCsoXC5cZHswLDR9KT8kKS8sCiAgZGF0ZTogL15cZHs0fS1cZHsxLDJ9LVxkezEsMn0kLwp9OyAvLyBydWxlOiB7IHJlcXVpcmVkOiBmYWxzZSwgdHlwZSwgcGF0dGVybjogLy8gfQoKdmFyIEZvcm1GaWVsZCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gRm9ybUZpZWxkKGlucHV0LCBydWxlLCBsYWJlbCwgbGFiZWxXaWR0aCkgewogICAgdmFyIF90aGlzID0gdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRm9ybUZpZWxkKTsKCiAgICB0aGlzLmxhYmVsID0gJyc7CiAgICB0aGlzLnJ1bGUgPSBydWxlOwoKICAgIGlmIChsYWJlbCkgewogICAgICB0aGlzLmxhYmVsID0gaCgnbGFiZWwnLCAnbGFiZWwnKS5jc3MoJ3dpZHRoJywgIiIuY29uY2F0KGxhYmVsV2lkdGgsICJweCIpKS5odG1sKGxhYmVsKTsKICAgIH0KCiAgICB0aGlzLnRpcCA9IGgoJ2RpdicsICd0aXAnKS5jaGlsZCgndGlwJykuaGlkZSgpOwogICAgdGhpcy5pbnB1dCA9IGlucHV0OwoKICAgIHRoaXMuaW5wdXQudmNoYW5nZSA9IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF90aGlzLnZhbGlkYXRlKCk7CiAgICB9OwoKICAgIHRoaXMuZWwgPSBoKCdkaXYnLCAiIi5jb25jYXQoY3NzUHJlZml4LCAiLWZvcm0tZmllbGQiKSkuY2hpbGRyZW4odGhpcy5sYWJlbCwgaW5wdXQuZWwsIHRoaXMudGlwKTsKICB9CgogIF9jcmVhdGVDbGFzcyhGb3JtRmllbGQsIFt7CiAgICBrZXk6ICJpc1Nob3ciLAogICAgdmFsdWU6IGZ1bmN0aW9uIGlzU2hvdygpIHsKICAgICAgcmV0dXJuIHRoaXMuZWwuY3NzKCdkaXNwbGF5JykgIT09ICdub25lJzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzaG93IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzaG93KCkgewogICAgICB0aGlzLmVsLnNob3coKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJoaWRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBoaWRlKCkgewogICAgICB0aGlzLmVsLmhpZGUoKTsKICAgICAgcmV0dXJuIHRoaXM7CiAgICB9CiAgfSwgewogICAga2V5OiAidmFsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB2YWwodikgewogICAgICByZXR1cm4gdGhpcy5pbnB1dC52YWwodik7CiAgICB9CiAgfSwgewogICAga2V5OiAiaGludCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gaGludChfaGludCkgewogICAgICB0aGlzLmlucHV0LmhpbnQoX2hpbnQpOwogICAgfQogIH0sIHsKICAgIGtleTogInZhbGlkYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB2YWxpZGF0ZSgpIHsKICAgICAgdmFyIGlucHV0ID0gdGhpcy5pbnB1dCwKICAgICAgICAgIHJ1bGUgPSB0aGlzLnJ1bGUsCiAgICAgICAgICB0aXAgPSB0aGlzLnRpcCwKICAgICAgICAgIGVsID0gdGhpcy5lbDsKICAgICAgdmFyIHYgPSBpbnB1dC52YWwoKTsKCiAgICAgIGlmIChydWxlLnJlcXVpcmVkKSB7CiAgICAgICAgaWYgKC9eXHMqJC8udGVzdCh2KSkgewogICAgICAgICAgdGlwLmh0bWwodCgndmFsaWRhdGlvbi5yZXF1aXJlZCcpKTsKICAgICAgICAgIGVsLmFkZENsYXNzKCdlcnJvcicpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgaWYgKHJ1bGUudHlwZSB8fCBydWxlLnBhdHRlcm4pIHsKICAgICAgICB2YXIgcGF0dGVybiA9IHJ1bGUucGF0dGVybiB8fCBwYXR0ZXJuc1tydWxlLnR5cGVdOwoKICAgICAgICBpZiAoIXBhdHRlcm4udGVzdCh2KSkgewogICAgICAgICAgdGlwLmh0bWwodCgndmFsaWRhdGlvbi5ub3RNYXRjaCcpKTsKICAgICAgICAgIGVsLmFkZENsYXNzKCdlcnJvcicpOwogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgfQoKICAgICAgZWwucmVtb3ZlQ2xhc3MoJ2Vycm9yJyk7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEZvcm1GaWVsZDsKfSgpOwoKZXhwb3J0IHsgRm9ybUZpZWxkIGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["D:/代码/del_demo/VisualizationExcle_Demo/src/components/x-spreadsheet/component/form_field.js"],"names":["h","cssPrefix","t","patterns","number","date","FormField","input","rule","label","labelWidth","css","html","tip","child","hide","vchange","validate","el","children","show","v","val","hint","required","test","addClass","type","pattern","removeClass"],"mappings":";;AAAA,SAASA,CAAT,QAAkB,WAAlB;AACA,SAASC,SAAT,QAA0B,WAA1B;AACA,SAASC,CAAT,QAAkB,kBAAlB;AAEA,IAAMC,QAAQ,GAAG;AACfC,EAAAA,MAAM,EAAE,6BADO;AAEfC,EAAAA,IAAI,EAAE;AAFS,CAAjB,C,CAKA;;IACqBC,S;AACnB,qBAAYC,KAAZ,EAAmBC,IAAnB,EAAyBC,KAAzB,EAAgCC,UAAhC,EAA4C;AAAA;;AAAA;;AAC1C,SAAKD,KAAL,GAAa,EAAb;AACA,SAAKD,IAAL,GAAYA,IAAZ;;AACA,QAAIC,KAAJ,EAAW;AACT,WAAKA,KAAL,GAAaT,CAAC,CAAC,OAAD,EAAU,OAAV,CAAD,CAAoBW,GAApB,CAAwB,OAAxB,YAAoCD,UAApC,SAAoDE,IAApD,CAAyDH,KAAzD,CAAb;AACD;;AACD,SAAKI,GAAL,GAAWb,CAAC,CAAC,KAAD,EAAQ,KAAR,CAAD,CAAgBc,KAAhB,CAAsB,KAAtB,EAA6BC,IAA7B,EAAX;AACA,SAAKR,KAAL,GAAaA,KAAb;;AACA,SAAKA,KAAL,CAAWS,OAAX,GAAqB;AAAA,aAAM,KAAI,CAACC,QAAL,EAAN;AAAA,KAArB;;AACA,SAAKC,EAAL,GAAUlB,CAAC,CAAC,KAAD,YAAWC,SAAX,iBAAD,CACPkB,QADO,CACE,KAAKV,KADP,EACcF,KAAK,CAACW,EADpB,EACwB,KAAKL,GAD7B,CAAV;AAED;;;;WAED,kBAAS;AACP,aAAO,KAAKK,EAAL,CAAQP,GAAR,CAAY,SAAZ,MAA2B,MAAlC;AACD;;;WAED,gBAAO;AACL,WAAKO,EAAL,CAAQE,IAAR;AACD;;;WAED,gBAAO;AACL,WAAKF,EAAL,CAAQH,IAAR;AACA,aAAO,IAAP;AACD;;;WAED,aAAIM,CAAJ,EAAO;AACL,aAAO,KAAKd,KAAL,CAAWe,GAAX,CAAeD,CAAf,CAAP;AACD;;;WAED,cAAKE,KAAL,EAAW;AACT,WAAKhB,KAAL,CAAWgB,IAAX,CAAgBA,KAAhB;AACD;;;WAED,oBAAW;AAAA,UAEPhB,KAFO,GAGL,IAHK,CAEPA,KAFO;AAAA,UAEAC,IAFA,GAGL,IAHK,CAEAA,IAFA;AAAA,UAEMK,GAFN,GAGL,IAHK,CAEMA,GAFN;AAAA,UAEWK,EAFX,GAGL,IAHK,CAEWA,EAFX;AAIT,UAAMG,CAAC,GAAGd,KAAK,CAACe,GAAN,EAAV;;AACA,UAAId,IAAI,CAACgB,QAAT,EAAmB;AACjB,YAAI,QAAQC,IAAR,CAAaJ,CAAb,CAAJ,EAAqB;AACnBR,UAAAA,GAAG,CAACD,IAAJ,CAASV,CAAC,CAAC,qBAAD,CAAV;AACAgB,UAAAA,EAAE,CAACQ,QAAH,CAAY,OAAZ;AACA,iBAAO,KAAP;AACD;AACF;;AACD,UAAIlB,IAAI,CAACmB,IAAL,IAAanB,IAAI,CAACoB,OAAtB,EAA+B;AAC7B,YAAMA,OAAO,GAAGpB,IAAI,CAACoB,OAAL,IAAgBzB,QAAQ,CAACK,IAAI,CAACmB,IAAN,CAAxC;;AACA,YAAI,CAACC,OAAO,CAACH,IAAR,CAAaJ,CAAb,CAAL,EAAsB;AACpBR,UAAAA,GAAG,CAACD,IAAJ,CAASV,CAAC,CAAC,qBAAD,CAAV;AACAgB,UAAAA,EAAE,CAACQ,QAAH,CAAY,OAAZ;AACA,iBAAO,KAAP;AACD;AACF;;AACDR,MAAAA,EAAE,CAACW,WAAH,CAAe,OAAf;AACA,aAAO,IAAP;AACD;;;;;;SAzDkBvB,S","sourcesContent":["import { h } from './element';\r\nimport { cssPrefix } from '../config';\r\nimport { t } from '../locale/locale';\r\n\r\nconst patterns = {\r\n  number: /(^\\d+$)|(^\\d+(\\.\\d{0,4})?$)/,\r\n  date: /^\\d{4}-\\d{1,2}-\\d{1,2}$/,\r\n};\r\n\r\n// rule: { required: false, type, pattern: // }\r\nexport default class FormField {\r\n  constructor(input, rule, label, labelWidth) {\r\n    this.label = '';\r\n    this.rule = rule;\r\n    if (label) {\r\n      this.label = h('label', 'label').css('width', `${labelWidth}px`).html(label);\r\n    }\r\n    this.tip = h('div', 'tip').child('tip').hide();\r\n    this.input = input;\r\n    this.input.vchange = () => this.validate();\r\n    this.el = h('div', `${cssPrefix}-form-field`)\r\n      .children(this.label, input.el, this.tip);\r\n  }\r\n\r\n  isShow() {\r\n    return this.el.css('display') !== 'none';\r\n  }\r\n\r\n  show() {\r\n    this.el.show();\r\n  }\r\n\r\n  hide() {\r\n    this.el.hide();\r\n    return this;\r\n  }\r\n\r\n  val(v) {\r\n    return this.input.val(v);\r\n  }\r\n\r\n  hint(hint) {\r\n    this.input.hint(hint);\r\n  }\r\n\r\n  validate() {\r\n    const {\r\n      input, rule, tip, el,\r\n    } = this;\r\n    const v = input.val();\r\n    if (rule.required) {\r\n      if (/^\\s*$/.test(v)) {\r\n        tip.html(t('validation.required'));\r\n        el.addClass('error');\r\n        return false;\r\n      }\r\n    }\r\n    if (rule.type || rule.pattern) {\r\n      const pattern = rule.pattern || patterns[rule.type];\r\n      if (!pattern.test(v)) {\r\n        tip.html(t('validation.notMatch'));\r\n        el.addClass('error');\r\n        return false;\r\n      }\r\n    }\r\n    el.removeClass('error');\r\n    return true;\r\n  }\r\n}\r\n"]}]}