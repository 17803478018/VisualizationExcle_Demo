{"remainingRequest":"D:\\代码\\del_demo\\VisualizationExcle_Demo\\node_modules\\babel-loader\\lib\\index.js!D:\\代码\\del_demo\\VisualizationExcle_Demo\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\代码\\del_demo\\VisualizationExcle_Demo\\src\\components\\x-spreadsheet\\component\\modal_validation.js","dependencies":[{"path":"D:\\代码\\del_demo\\VisualizationExcle_Demo\\src\\components\\x-spreadsheet\\component\\modal_validation.js","mtime":1614915429339},{"path":"D:\\代码\\del_demo\\VisualizationExcle_Demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1596536485880},{"path":"D:\\代码\\del_demo\\VisualizationExcle_Demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1606828682259},{"path":"D:\\代码\\del_demo\\VisualizationExcle_Demo\\node_modules\\eslint-loader\\index.js","mtime":1603719226989}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJEOi9cdTRFRTNcdTc4MDEvZGVsX2RlbW8vVmlzdWFsaXphdGlvbkV4Y2xlX0RlbW8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJEOi9cdTRFRTNcdTc4MDEvZGVsX2RlbW8vVmlzdWFsaXphdGlvbkV4Y2xlX0RlbW8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJEOi9cdTRFRTNcdTc4MDEvZGVsX2RlbW8vVmlzdWFsaXphdGlvbkV4Y2xlX0RlbW8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICJEOi9cdTRFRTNcdTc4MDEvZGVsX2RlbW8vVmlzdWFsaXphdGlvbkV4Y2xlX0RlbW8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyIjsKaW1wb3J0IE1vZGFsIGZyb20gJy4vbW9kYWwnOwppbXBvcnQgRm9ybUlucHV0IGZyb20gJy4vZm9ybV9pbnB1dCc7CmltcG9ydCBGb3JtU2VsZWN0IGZyb20gJy4vZm9ybV9zZWxlY3QnOwppbXBvcnQgRm9ybUZpZWxkIGZyb20gJy4vZm9ybV9maWVsZCc7CmltcG9ydCBCdXR0b24gZnJvbSAnLi9idXR0b24nOwppbXBvcnQgeyB0IH0gZnJvbSAnLi4vbG9jYWxlL2xvY2FsZSc7CmltcG9ydCB7IGggfSBmcm9tICcuL2VsZW1lbnQnOwppbXBvcnQgeyBjc3NQcmVmaXggfSBmcm9tICcuLi9jb25maWcnOwp2YXIgZmllbGRMYWJlbFdpZHRoID0gMTAwOwoKdmFyIE1vZGFsVmFsaWRhdGlvbiA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX01vZGFsKSB7CiAgX2luaGVyaXRzKE1vZGFsVmFsaWRhdGlvbiwgX01vZGFsKTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihNb2RhbFZhbGlkYXRpb24pOwoKICBmdW5jdGlvbiBNb2RhbFZhbGlkYXRpb24oKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1vZGFsVmFsaWRhdGlvbik7CgogICAgdmFyIG1mID0gbmV3IEZvcm1GaWVsZChuZXcgRm9ybVNlbGVjdCgnY2VsbCcsIFsnY2VsbCddLCAvLyBjZWxsfHJvd3xjb2x1bW4KICAgICcxMDAlJywgZnVuY3Rpb24gKGl0KSB7CiAgICAgIHJldHVybiB0KCJkYXRhVmFsaWRhdGlvbi5tb2RlVHlwZS4iLmNvbmNhdChpdCkpOwogICAgfSksIHsKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sICIiLmNvbmNhdCh0KCdkYXRhVmFsaWRhdGlvbi5yYW5nZScpLCAiOiIpLCBmaWVsZExhYmVsV2lkdGgpOwogICAgdmFyIHJmID0gbmV3IEZvcm1GaWVsZChuZXcgRm9ybUlucHV0KCcxMjBweCcsICdFMyBvciBFMzpGMTInKSwgewogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgcGF0dGVybjogL14oW0EtWl17MSwyfVsxLTldXGQqKSg6W0EtWl17MSwyfVsxLTldXGQqKT8kLwogICAgfSk7CiAgICB2YXIgY2YgPSBuZXcgRm9ybUZpZWxkKG5ldyBGb3JtU2VsZWN0KCdsaXN0JywgWydsaXN0JywgJ251bWJlcicsICdkYXRlJywgJ3Bob25lJywgJ2VtYWlsJ10sICcxMDAlJywgZnVuY3Rpb24gKGl0KSB7CiAgICAgIHJldHVybiB0KCJkYXRhVmFsaWRhdGlvbi50eXBlLiIuY29uY2F0KGl0KSk7CiAgICB9LCBmdW5jdGlvbiAoaXQpIHsKICAgICAgcmV0dXJuIF90aGlzLmNyaXRlcmlhU2VsZWN0ZWQoaXQpOwogICAgfSksIHsKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sICIiLmNvbmNhdCh0KCdkYXRhVmFsaWRhdGlvbi5jcml0ZXJpYScpLCAiOiIpLCBmaWVsZExhYmVsV2lkdGgpOyAvLyBvcGVyYXRvcgoKICAgIHZhciBvZiA9IG5ldyBGb3JtRmllbGQobmV3IEZvcm1TZWxlY3QoJ2JlJywgWydiZScsICduYmUnLCAnZXEnLCAnbmVxJywgJ2x0JywgJ2x0ZScsICdndCcsICdndGUnXSwgJzE2MHB4JywgZnVuY3Rpb24gKGl0KSB7CiAgICAgIHJldHVybiB0KCJkYXRhVmFsaWRhdGlvbi5vcGVyYXRvci4iLmNvbmNhdChpdCkpOwogICAgfSwgZnVuY3Rpb24gKGl0KSB7CiAgICAgIHJldHVybiBfdGhpcy5jcml0ZXJpYU9wZXJhdG9yU2VsZWN0ZWQoaXQpOwogICAgfSksIHsKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0pLmhpZGUoKTsgLy8gbWluLCBtYXgKCiAgICB2YXIgbWludmYgPSBuZXcgRm9ybUZpZWxkKG5ldyBGb3JtSW5wdXQoJzcwcHgnLCAnMTAnKSwgewogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSkuaGlkZSgpOwogICAgdmFyIG1heHZmID0gbmV3IEZvcm1GaWVsZChuZXcgRm9ybUlucHV0KCc3MHB4JywgJzEwMCcpLCB7CiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICB0eXBlOiAnbnVtYmVyJwogICAgfSkuaGlkZSgpOyAvLyB2YWx1ZQoKICAgIHZhciBzdmYgPSBuZXcgRm9ybUZpZWxkKG5ldyBGb3JtSW5wdXQoJzEyMHB4JywgJ2EsYixjJyksIHsKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0pOwogICAgdmFyIHZmID0gbmV3IEZvcm1GaWVsZChuZXcgRm9ybUlucHV0KCc3MHB4JywgJzEwJyksIHsKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIHR5cGU6ICdudW1iZXInCiAgICB9KS5oaWRlKCk7CiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIHQoJ2NvbnRleHRtZW51LnZhbGlkYXRpb24nKSwgW2goJ2RpdicsICIiLmNvbmNhdChjc3NQcmVmaXgsICItZm9ybS1maWVsZHMiKSkuY2hpbGRyZW4obWYuZWwsIHJmLmVsKSwgaCgnZGl2JywgIiIuY29uY2F0KGNzc1ByZWZpeCwgIi1mb3JtLWZpZWxkcyIpKS5jaGlsZHJlbihjZi5lbCwgb2YuZWwsIG1pbnZmLmVsLCBtYXh2Zi5lbCwgdmYuZWwsIHN2Zi5lbCksIGgoJ2RpdicsICIiLmNvbmNhdChjc3NQcmVmaXgsICItYnV0dG9ucyIpKS5jaGlsZHJlbihuZXcgQnV0dG9uKCdjYW5jZWwnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfdGhpcy5idG5DbGljaygnY2FuY2VsJyk7CiAgICB9KSwgbmV3IEJ1dHRvbigncmVtb3ZlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gX3RoaXMuYnRuQ2xpY2soJ3JlbW92ZScpOwogICAgfSksIG5ldyBCdXR0b24oJ3NhdmUnLCAncHJpbWFyeScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF90aGlzLmJ0bkNsaWNrKCdzYXZlJyk7CiAgICB9KSldKTsKICAgIF90aGlzLm1mID0gbWY7CiAgICBfdGhpcy5yZiA9IHJmOwogICAgX3RoaXMuY2YgPSBjZjsKICAgIF90aGlzLm9mID0gb2Y7CiAgICBfdGhpcy5taW52ZiA9IG1pbnZmOwogICAgX3RoaXMubWF4dmYgPSBtYXh2ZjsKICAgIF90aGlzLnZmID0gdmY7CiAgICBfdGhpcy5zdmYgPSBzdmY7CgogICAgX3RoaXMuY2hhbmdlID0gZnVuY3Rpb24gKCkge307CgogICAgcmV0dXJuIF90aGlzOwogIH0KCiAgX2NyZWF0ZUNsYXNzKE1vZGFsVmFsaWRhdGlvbiwgW3sKICAgIGtleTogInNob3dWZiIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2hvd1ZmKGl0KSB7CiAgICAgIHZhciBoaW50ID0gaXQgPT09ICdkYXRlJyA/ICcyMDE4LTExLTEyJyA6ICcxMCc7CiAgICAgIHZhciB2ZiA9IHRoaXMudmY7CiAgICAgIHZmLmlucHV0LmhpbnQoaGludCk7CiAgICAgIHZmLnNob3coKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJjcml0ZXJpYVNlbGVjdGVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcml0ZXJpYVNlbGVjdGVkKGl0KSB7CiAgICAgIHZhciBvZiA9IHRoaXMub2YsCiAgICAgICAgICBtaW52ZiA9IHRoaXMubWludmYsCiAgICAgICAgICBtYXh2ZiA9IHRoaXMubWF4dmYsCiAgICAgICAgICB2ZiA9IHRoaXMudmYsCiAgICAgICAgICBzdmYgPSB0aGlzLnN2ZjsKCiAgICAgIGlmIChpdCA9PT0gJ2RhdGUnIHx8IGl0ID09PSAnbnVtYmVyJykgewogICAgICAgIG9mLnNob3coKTsKICAgICAgICBtaW52Zi5ydWxlLnR5cGUgPSBpdDsKICAgICAgICBtYXh2Zi5ydWxlLnR5cGUgPSBpdDsKCiAgICAgICAgaWYgKGl0ID09PSAnZGF0ZScpIHsKICAgICAgICAgIG1pbnZmLmhpbnQoJzIwMTgtMTEtMTInKTsKICAgICAgICAgIG1heHZmLmhpbnQoJzIwMTktMTEtMTInKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbWludmYuaGludCgnMTAnKTsKICAgICAgICAgIG1heHZmLmhpbnQoJzEwMCcpOwogICAgICAgIH0KCiAgICAgICAgbWludmYuc2hvdygpOwogICAgICAgIG1heHZmLnNob3coKTsKICAgICAgICB2Zi5oaWRlKCk7CiAgICAgICAgc3ZmLmhpZGUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoaXQgPT09ICdsaXN0JykgewogICAgICAgICAgc3ZmLnNob3coKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc3ZmLmhpZGUoKTsKICAgICAgICB9CgogICAgICAgIHZmLmhpZGUoKTsKICAgICAgICBvZi5oaWRlKCk7CiAgICAgICAgbWludmYuaGlkZSgpOwogICAgICAgIG1heHZmLmhpZGUoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImNyaXRlcmlhT3BlcmF0b3JTZWxlY3RlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY3JpdGVyaWFPcGVyYXRvclNlbGVjdGVkKGl0KSB7CiAgICAgIGlmICghaXQpIHJldHVybjsKICAgICAgdmFyIG1pbnZmID0gdGhpcy5taW52ZiwKICAgICAgICAgIG1heHZmID0gdGhpcy5tYXh2ZiwKICAgICAgICAgIHZmID0gdGhpcy52ZjsKCiAgICAgIGlmIChpdCA9PT0gJ2JlJyB8fCBpdCA9PT0gJ25iZScpIHsKICAgICAgICBtaW52Zi5zaG93KCk7CiAgICAgICAgbWF4dmYuc2hvdygpOwogICAgICAgIHZmLmhpZGUoKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB2YXIgdHlwZSA9IHRoaXMuY2YudmFsKCk7CiAgICAgICAgdmYucnVsZS50eXBlID0gdHlwZTsKCiAgICAgICAgaWYgKHR5cGUgPT09ICdkYXRlJykgewogICAgICAgICAgdmYuaGludCgnMjAxOC0xMS0xMicpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB2Zi5oaW50KCcxMCcpOwogICAgICAgIH0KCiAgICAgICAgdmYuc2hvdygpOwogICAgICAgIG1pbnZmLmhpZGUoKTsKICAgICAgICBtYXh2Zi5oaWRlKCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJidG5DbGljayIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYnRuQ2xpY2soYWN0aW9uKSB7CiAgICAgIGlmIChhY3Rpb24gPT09ICdjYW5jZWwnKSB7CiAgICAgICAgdGhpcy5oaWRlKCk7CiAgICAgIH0gZWxzZSBpZiAoYWN0aW9uID09PSAncmVtb3ZlJykgewogICAgICAgIHRoaXMuY2hhbmdlKCdyZW1vdmUnKTsKICAgICAgICB0aGlzLmhpZGUoKTsKICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09ICdzYXZlJykgewogICAgICAgIC8vIHZhbGlkYXRlCiAgICAgICAgdmFyIGF0dHJzID0gWydtZicsICdyZicsICdjZicsICdvZicsICdzdmYnLCAndmYnLCAnbWludmYnLCAnbWF4dmYnXTsKCiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhdHRycy5sZW5ndGg7IGkgKz0gMSkgewogICAgICAgICAgdmFyIGZpZWxkID0gdGhpc1thdHRyc1tpXV07IC8vIGNvbnNvbGUubG9nKCdmaWVsZDonLCBmaWVsZCk7CgogICAgICAgICAgaWYgKGZpZWxkLmlzU2hvdygpKSB7CiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdpdDonLCBpdCk7CiAgICAgICAgICAgIGlmICghZmllbGQudmFsaWRhdGUoKSkgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdmFyIG1vZGUgPSB0aGlzLm1mLnZhbCgpOwogICAgICAgIHZhciByZWYgPSB0aGlzLnJmLnZhbCgpOwogICAgICAgIHZhciB0eXBlID0gdGhpcy5jZi52YWwoKTsKICAgICAgICB2YXIgb3BlcmF0b3IgPSB0aGlzLm9mLnZhbCgpOwogICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuc3ZmLnZhbCgpOwoKICAgICAgICBpZiAodHlwZSA9PT0gJ251bWJlcicgfHwgdHlwZSA9PT0gJ2RhdGUnKSB7CiAgICAgICAgICBpZiAob3BlcmF0b3IgPT09ICdiZScgfHwgb3BlcmF0b3IgPT09ICduYmUnKSB7CiAgICAgICAgICAgIHZhbHVlID0gW3RoaXMubWludmYudmFsKCksIHRoaXMubWF4dmYudmFsKCldOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFsdWUgPSB0aGlzLnZmLnZhbCgpOwogICAgICAgICAgfQogICAgICAgIH0gLy8gY29uc29sZS5sb2cobW9kZSwgcmVmLCB0eXBlLCBvcGVyYXRvciwgdmFsdWUpOwoKCiAgICAgICAgdGhpcy5jaGFuZ2UoJ3NhdmUnLCBtb2RlLCByZWYsIHsKICAgICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgICBvcGVyYXRvcjogb3BlcmF0b3IsCiAgICAgICAgICByZXF1aXJlZDogZmFsc2UsCiAgICAgICAgICB2YWx1ZTogdmFsdWUKICAgICAgICB9KTsKICAgICAgICB0aGlzLmhpZGUoKTsKICAgICAgfQogICAgfSAvLyB2YWxpZGF0aW9uOiB7IG1vZGUsIHJlZiwgdmFsaWRhdG9yIH0KCiAgfSwgewogICAga2V5OiAic2V0VmFsdWUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHNldFZhbHVlKHYpIHsKICAgICAgaWYgKHYpIHsKICAgICAgICB2YXIgbWYgPSB0aGlzLm1mLAogICAgICAgICAgICByZiA9IHRoaXMucmYsCiAgICAgICAgICAgIGNmID0gdGhpcy5jZiwKICAgICAgICAgICAgb2YgPSB0aGlzLm9mLAogICAgICAgICAgICBzdmYgPSB0aGlzLnN2ZiwKICAgICAgICAgICAgdmYgPSB0aGlzLnZmLAogICAgICAgICAgICBtaW52ZiA9IHRoaXMubWludmYsCiAgICAgICAgICAgIG1heHZmID0gdGhpcy5tYXh2ZjsKICAgICAgICB2YXIgbW9kZSA9IHYubW9kZSwKICAgICAgICAgICAgcmVmID0gdi5yZWYsCiAgICAgICAgICAgIHZhbGlkYXRvciA9IHYudmFsaWRhdG9yOwoKICAgICAgICB2YXIgX3JlZiA9IHZhbGlkYXRvciB8fCB7CiAgICAgICAgICB0eXBlOiAnbGlzdCcKICAgICAgICB9LAogICAgICAgICAgICB0eXBlID0gX3JlZi50eXBlLAogICAgICAgICAgICBvcGVyYXRvciA9IF9yZWYub3BlcmF0b3IsCiAgICAgICAgICAgIHZhbHVlID0gX3JlZi52YWx1ZTsKCiAgICAgICAgbWYudmFsKG1vZGUgfHwgJ2NlbGwnKTsKICAgICAgICByZi52YWwocmVmKTsKICAgICAgICBjZi52YWwodHlwZSk7CiAgICAgICAgb2YudmFsKG9wZXJhdG9yKTsKCiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7CiAgICAgICAgICBtaW52Zi52YWwodmFsdWVbMF0pOwogICAgICAgICAgbWF4dmYudmFsKHZhbHVlWzFdKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc3ZmLnZhbCh2YWx1ZSB8fCAnJyk7CiAgICAgICAgICB2Zi52YWwodmFsdWUgfHwgJycpOwogICAgICAgIH0KCiAgICAgICAgdGhpcy5jcml0ZXJpYVNlbGVjdGVkKHR5cGUpOwogICAgICAgIHRoaXMuY3JpdGVyaWFPcGVyYXRvclNlbGVjdGVkKG9wZXJhdG9yKTsKICAgICAgfQoKICAgICAgdGhpcy5zaG93KCk7CiAgICB9CiAgfV0pOwoKICByZXR1cm4gTW9kYWxWYWxpZGF0aW9uOwp9KE1vZGFsKTsKCmV4cG9ydCB7IE1vZGFsVmFsaWRhdGlvbiBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["D:/代码/del_demo/VisualizationExcle_Demo/src/components/x-spreadsheet/component/modal_validation.js"],"names":["Modal","FormInput","FormSelect","FormField","Button","t","h","cssPrefix","fieldLabelWidth","ModalValidation","mf","it","required","rf","pattern","cf","criteriaSelected","of","criteriaOperatorSelected","hide","minvf","maxvf","type","svf","vf","children","el","on","btnClick","change","hint","input","show","rule","val","action","attrs","i","length","field","isShow","validate","mode","ref","operator","value","v","validator","Array","isArray"],"mappings":"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","sourcesContent":["import Modal from './modal';\r\nimport FormInput from './form_input';\r\nimport FormSelect from './form_select';\r\nimport FormField from './form_field';\r\nimport Button from './button';\r\nimport { t } from '../locale/locale';\r\nimport { h } from './element';\r\nimport { cssPrefix } from '../config';\r\n\r\nconst fieldLabelWidth = 100;\r\n\r\nexport default class ModalValidation extends Modal {\r\n  constructor() {\r\n    const mf = new FormField(\r\n      new FormSelect('cell',\r\n        ['cell'], // cell|row|column\r\n        '100%',\r\n        it => t(`dataValidation.modeType.${it}`)),\r\n      { required: true },\r\n      `${t('dataValidation.range')}:`,\r\n      fieldLabelWidth,\r\n    );\r\n    const rf = new FormField(\r\n      new FormInput('120px', 'E3 or E3:F12'),\r\n      { required: true, pattern: /^([A-Z]{1,2}[1-9]\\d*)(:[A-Z]{1,2}[1-9]\\d*)?$/ },\r\n    );\r\n    const cf = new FormField(\r\n      new FormSelect('list',\r\n        ['list', 'number', 'date', 'phone', 'email'],\r\n        '100%',\r\n        it => t(`dataValidation.type.${it}`),\r\n        it => this.criteriaSelected(it)),\r\n      { required: true },\r\n      `${t('dataValidation.criteria')}:`,\r\n      fieldLabelWidth,\r\n    );\r\n\r\n    // operator\r\n    const of = new FormField(\r\n      new FormSelect('be',\r\n        ['be', 'nbe', 'eq', 'neq', 'lt', 'lte', 'gt', 'gte'],\r\n        '160px',\r\n        it => t(`dataValidation.operator.${it}`),\r\n        it => this.criteriaOperatorSelected(it)),\r\n      { required: true },\r\n    ).hide();\r\n    // min, max\r\n    const minvf = new FormField(\r\n      new FormInput('70px', '10'),\r\n      { required: true },\r\n    ).hide();\r\n    const maxvf = new FormField(\r\n      new FormInput('70px', '100'),\r\n      { required: true, type: 'number' },\r\n    ).hide();\r\n    // value\r\n    const svf = new FormField(\r\n      new FormInput('120px', 'a,b,c'),\r\n      { required: true },\r\n    );\r\n    const vf = new FormField(\r\n      new FormInput('70px', '10'),\r\n      { required: true, type: 'number' },\r\n    ).hide();\r\n\r\n    super(t('contextmenu.validation'), [\r\n      h('div', `${cssPrefix}-form-fields`).children(\r\n        mf.el,\r\n        rf.el,\r\n      ),\r\n      h('div', `${cssPrefix}-form-fields`).children(\r\n        cf.el,\r\n        of.el,\r\n        minvf.el,\r\n        maxvf.el,\r\n        vf.el,\r\n        svf.el,\r\n      ),\r\n      h('div', `${cssPrefix}-buttons`).children(\r\n        new Button('cancel').on('click', () => this.btnClick('cancel')),\r\n        new Button('remove').on('click', () => this.btnClick('remove')),\r\n        new Button('save', 'primary').on('click', () => this.btnClick('save')),\r\n      ),\r\n    ]);\r\n    this.mf = mf;\r\n    this.rf = rf;\r\n    this.cf = cf;\r\n    this.of = of;\r\n    this.minvf = minvf;\r\n    this.maxvf = maxvf;\r\n    this.vf = vf;\r\n    this.svf = svf;\r\n    this.change = () => {};\r\n  }\r\n\r\n  showVf(it) {\r\n    const hint = it === 'date' ? '2018-11-12' : '10';\r\n    const { vf } = this;\r\n    vf.input.hint(hint);\r\n    vf.show();\r\n  }\r\n\r\n  criteriaSelected(it) {\r\n    const {\r\n      of, minvf, maxvf, vf, svf,\r\n    } = this;\r\n    if (it === 'date' || it === 'number') {\r\n      of.show();\r\n      minvf.rule.type = it;\r\n      maxvf.rule.type = it;\r\n      if (it === 'date') {\r\n        minvf.hint('2018-11-12');\r\n        maxvf.hint('2019-11-12');\r\n      } else {\r\n        minvf.hint('10');\r\n        maxvf.hint('100');\r\n      }\r\n      minvf.show();\r\n      maxvf.show();\r\n      vf.hide();\r\n      svf.hide();\r\n    } else {\r\n      if (it === 'list') {\r\n        svf.show();\r\n      } else {\r\n        svf.hide();\r\n      }\r\n      vf.hide();\r\n      of.hide();\r\n      minvf.hide();\r\n      maxvf.hide();\r\n    }\r\n  }\r\n\r\n  criteriaOperatorSelected(it) {\r\n    if (!it) return;\r\n    const {\r\n      minvf, maxvf, vf,\r\n    } = this;\r\n    if (it === 'be' || it === 'nbe') {\r\n      minvf.show();\r\n      maxvf.show();\r\n      vf.hide();\r\n    } else {\r\n      const type = this.cf.val();\r\n      vf.rule.type = type;\r\n      if (type === 'date') {\r\n        vf.hint('2018-11-12');\r\n      } else {\r\n        vf.hint('10');\r\n      }\r\n      vf.show();\r\n      minvf.hide();\r\n      maxvf.hide();\r\n    }\r\n  }\r\n\r\n  btnClick(action) {\r\n    if (action === 'cancel') {\r\n      this.hide();\r\n    } else if (action === 'remove') {\r\n      this.change('remove');\r\n      this.hide();\r\n    } else if (action === 'save') {\r\n      // validate\r\n      const attrs = ['mf', 'rf', 'cf', 'of', 'svf', 'vf', 'minvf', 'maxvf'];\r\n      for (let i = 0; i < attrs.length; i += 1) {\r\n        const field = this[attrs[i]];\r\n        // console.log('field:', field);\r\n        if (field.isShow()) {\r\n          // console.log('it:', it);\r\n          if (!field.validate()) return;\r\n        }\r\n      }\r\n\r\n      const mode = this.mf.val();\r\n      const ref = this.rf.val();\r\n      const type = this.cf.val();\r\n      const operator = this.of.val();\r\n      let value = this.svf.val();\r\n      if (type === 'number' || type === 'date') {\r\n        if (operator === 'be' || operator === 'nbe') {\r\n          value = [this.minvf.val(), this.maxvf.val()];\r\n        } else {\r\n          value = this.vf.val();\r\n        }\r\n      }\r\n      // console.log(mode, ref, type, operator, value);\r\n      this.change('save',\r\n        mode,\r\n        ref,\r\n        {\r\n          type, operator, required: false, value,\r\n        });\r\n      this.hide();\r\n    }\r\n  }\r\n\r\n  // validation: { mode, ref, validator }\r\n  setValue(v) {\r\n    if (v) {\r\n      const {\r\n        mf, rf, cf, of, svf, vf, minvf, maxvf,\r\n      } = this;\r\n      const {\r\n        mode, ref, validator,\r\n      } = v;\r\n      const {\r\n        type, operator, value,\r\n      } = validator || { type: 'list' };\r\n      mf.val(mode || 'cell');\r\n      rf.val(ref);\r\n      cf.val(type);\r\n      of.val(operator);\r\n      if (Array.isArray(value)) {\r\n        minvf.val(value[0]);\r\n        maxvf.val(value[1]);\r\n      } else {\r\n        svf.val(value || '');\r\n        vf.val(value || '');\r\n      }\r\n      this.criteriaSelected(type);\r\n      this.criteriaOperatorSelected(operator);\r\n    }\r\n    this.show();\r\n  }\r\n}\r\n"]}]}