{"remainingRequest":"C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\src\\components\\x-spreadsheet\\component\\modal_validation.js","dependencies":[{"path":"C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\src\\components\\x-spreadsheet\\component\\modal_validation.js","mtime":1615364198199},{"path":"C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615364186494},{"path":"C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\node_modules\\babel-loader\\lib\\index.js","mtime":1615364186192},{"path":"C:\\Users\\吴建明\\Desktop\\VisualizationExcle_Demo\\node_modules\\eslint-loader\\index.js","mtime":1615364189991}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJDOi9Vc2Vycy9cdTU0MzRcdTVFRkFcdTY2MEUvRGVza3RvcC9WaXN1YWxpemF0aW9uRXhjbGVfRGVtby9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkM6L1VzZXJzL1x1NTQzNFx1NUVGQVx1NjYwRS9EZXNrdG9wL1Zpc3VhbGl6YXRpb25FeGNsZV9EZW1vL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiQzovVXNlcnMvXHU1NDM0XHU1RUZBXHU2NjBFL0Rlc2t0b3AvVmlzdWFsaXphdGlvbkV4Y2xlX0RlbW8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9jcmVhdGVTdXBlciBmcm9tICJDOi9Vc2Vycy9cdTU0MzRcdTVFRkFcdTY2MEUvRGVza3RvcC9WaXN1YWxpemF0aW9uRXhjbGVfRGVtby9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlU3VwZXIiOwppbXBvcnQgTW9kYWwgZnJvbSAnLi9tb2RhbCc7CmltcG9ydCBGb3JtSW5wdXQgZnJvbSAnLi9mb3JtX2lucHV0JzsKaW1wb3J0IEZvcm1TZWxlY3QgZnJvbSAnLi9mb3JtX3NlbGVjdCc7CmltcG9ydCBGb3JtRmllbGQgZnJvbSAnLi9mb3JtX2ZpZWxkJzsKaW1wb3J0IEJ1dHRvbiBmcm9tICcuL2J1dHRvbic7CmltcG9ydCB7IHQgfSBmcm9tICcuLi9sb2NhbGUvbG9jYWxlJzsKaW1wb3J0IHsgaCB9IGZyb20gJy4vZWxlbWVudCc7CmltcG9ydCB7IGNzc1ByZWZpeCB9IGZyb20gJy4uL2NvbmZpZyc7CnZhciBmaWVsZExhYmVsV2lkdGggPSAxMDA7Cgp2YXIgTW9kYWxWYWxpZGF0aW9uID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfTW9kYWwpIHsKICBfaW5oZXJpdHMoTW9kYWxWYWxpZGF0aW9uLCBfTW9kYWwpOwoKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKE1vZGFsVmFsaWRhdGlvbik7CgogIGZ1bmN0aW9uIE1vZGFsVmFsaWRhdGlvbigpIHsKICAgIHZhciBfdGhpczsKCiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTW9kYWxWYWxpZGF0aW9uKTsKCiAgICB2YXIgbWYgPSBuZXcgRm9ybUZpZWxkKG5ldyBGb3JtU2VsZWN0KCdjZWxsJywgWydjZWxsJ10sIC8vIGNlbGx8cm93fGNvbHVtbgogICAgJzEwMCUnLCBmdW5jdGlvbiAoaXQpIHsKICAgICAgcmV0dXJuIHQoImRhdGFWYWxpZGF0aW9uLm1vZGVUeXBlLiIuY29uY2F0KGl0KSk7CiAgICB9KSwgewogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwgIiIuY29uY2F0KHQoJ2RhdGFWYWxpZGF0aW9uLnJhbmdlJyksICI6IiksIGZpZWxkTGFiZWxXaWR0aCk7CiAgICB2YXIgcmYgPSBuZXcgRm9ybUZpZWxkKG5ldyBGb3JtSW5wdXQoJzEyMHB4JywgJ0UzIG9yIEUzOkYxMicpLCB7CiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICBwYXR0ZXJuOiAvXihbQS1aXXsxLDJ9WzEtOV1cZCopKDpbQS1aXXsxLDJ9WzEtOV1cZCopPyQvCiAgICB9KTsKICAgIHZhciBjZiA9IG5ldyBGb3JtRmllbGQobmV3IEZvcm1TZWxlY3QoJ2xpc3QnLCBbJ2xpc3QnLCAnbnVtYmVyJywgJ2RhdGUnLCAncGhvbmUnLCAnZW1haWwnXSwgJzEwMCUnLCBmdW5jdGlvbiAoaXQpIHsKICAgICAgcmV0dXJuIHQoImRhdGFWYWxpZGF0aW9uLnR5cGUuIi5jb25jYXQoaXQpKTsKICAgIH0sIGZ1bmN0aW9uIChpdCkgewogICAgICByZXR1cm4gX3RoaXMuY3JpdGVyaWFTZWxlY3RlZChpdCk7CiAgICB9KSwgewogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwgIiIuY29uY2F0KHQoJ2RhdGFWYWxpZGF0aW9uLmNyaXRlcmlhJyksICI6IiksIGZpZWxkTGFiZWxXaWR0aCk7IC8vIG9wZXJhdG9yCgogICAgdmFyIG9mID0gbmV3IEZvcm1GaWVsZChuZXcgRm9ybVNlbGVjdCgnYmUnLCBbJ2JlJywgJ25iZScsICdlcScsICduZXEnLCAnbHQnLCAnbHRlJywgJ2d0JywgJ2d0ZSddLCAnMTYwcHgnLCBmdW5jdGlvbiAoaXQpIHsKICAgICAgcmV0dXJuIHQoImRhdGFWYWxpZGF0aW9uLm9wZXJhdG9yLiIuY29uY2F0KGl0KSk7CiAgICB9LCBmdW5jdGlvbiAoaXQpIHsKICAgICAgcmV0dXJuIF90aGlzLmNyaXRlcmlhT3BlcmF0b3JTZWxlY3RlZChpdCk7CiAgICB9KSwgewogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSkuaGlkZSgpOyAvLyBtaW4sIG1heAoKICAgIHZhciBtaW52ZiA9IG5ldyBGb3JtRmllbGQobmV3IEZvcm1JbnB1dCgnNzBweCcsICcxMCcpLCB7CiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9KS5oaWRlKCk7CiAgICB2YXIgbWF4dmYgPSBuZXcgRm9ybUZpZWxkKG5ldyBGb3JtSW5wdXQoJzcwcHgnLCAnMTAwJyksIHsKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgIHR5cGU6ICdudW1iZXInCiAgICB9KS5oaWRlKCk7IC8vIHZhbHVlCgogICAgdmFyIHN2ZiA9IG5ldyBGb3JtRmllbGQobmV3IEZvcm1JbnB1dCgnMTIwcHgnLCAnYSxiLGMnKSwgewogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSk7CiAgICB2YXIgdmYgPSBuZXcgRm9ybUZpZWxkKG5ldyBGb3JtSW5wdXQoJzcwcHgnLCAnMTAnKSwgewogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgdHlwZTogJ251bWJlcicKICAgIH0pLmhpZGUoKTsKICAgIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgdCgnY29udGV4dG1lbnUudmFsaWRhdGlvbicpLCBbaCgnZGl2JywgIiIuY29uY2F0KGNzc1ByZWZpeCwgIi1mb3JtLWZpZWxkcyIpKS5jaGlsZHJlbihtZi5lbCwgcmYuZWwpLCBoKCdkaXYnLCAiIi5jb25jYXQoY3NzUHJlZml4LCAiLWZvcm0tZmllbGRzIikpLmNoaWxkcmVuKGNmLmVsLCBvZi5lbCwgbWludmYuZWwsIG1heHZmLmVsLCB2Zi5lbCwgc3ZmLmVsKSwgaCgnZGl2JywgIiIuY29uY2F0KGNzc1ByZWZpeCwgIi1idXR0b25zIikpLmNoaWxkcmVuKG5ldyBCdXR0b24oJ2NhbmNlbCcpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIF90aGlzLmJ0bkNsaWNrKCdjYW5jZWwnKTsKICAgIH0pLCBuZXcgQnV0dG9uKCdyZW1vdmUnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBfdGhpcy5idG5DbGljaygncmVtb3ZlJyk7CiAgICB9KSwgbmV3IEJ1dHRvbignc2F2ZScsICdwcmltYXJ5Jykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gX3RoaXMuYnRuQ2xpY2soJ3NhdmUnKTsKICAgIH0pKV0pOwogICAgX3RoaXMubWYgPSBtZjsKICAgIF90aGlzLnJmID0gcmY7CiAgICBfdGhpcy5jZiA9IGNmOwogICAgX3RoaXMub2YgPSBvZjsKICAgIF90aGlzLm1pbnZmID0gbWludmY7CiAgICBfdGhpcy5tYXh2ZiA9IG1heHZmOwogICAgX3RoaXMudmYgPSB2ZjsKICAgIF90aGlzLnN2ZiA9IHN2ZjsKCiAgICBfdGhpcy5jaGFuZ2UgPSBmdW5jdGlvbiAoKSB7fTsKCiAgICByZXR1cm4gX3RoaXM7CiAgfQoKICBfY3JlYXRlQ2xhc3MoTW9kYWxWYWxpZGF0aW9uLCBbewogICAga2V5OiAic2hvd1ZmIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzaG93VmYoaXQpIHsKICAgICAgdmFyIGhpbnQgPSBpdCA9PT0gJ2RhdGUnID8gJzIwMTgtMTEtMTInIDogJzEwJzsKICAgICAgdmFyIHZmID0gdGhpcy52ZjsKICAgICAgdmYuaW5wdXQuaGludChoaW50KTsKICAgICAgdmYuc2hvdygpOwogICAgfQogIH0sIHsKICAgIGtleTogImNyaXRlcmlhU2VsZWN0ZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGNyaXRlcmlhU2VsZWN0ZWQoaXQpIHsKICAgICAgdmFyIG9mID0gdGhpcy5vZiwKICAgICAgICAgIG1pbnZmID0gdGhpcy5taW52ZiwKICAgICAgICAgIG1heHZmID0gdGhpcy5tYXh2ZiwKICAgICAgICAgIHZmID0gdGhpcy52ZiwKICAgICAgICAgIHN2ZiA9IHRoaXMuc3ZmOwoKICAgICAgaWYgKGl0ID09PSAnZGF0ZScgfHwgaXQgPT09ICdudW1iZXInKSB7CiAgICAgICAgb2Yuc2hvdygpOwogICAgICAgIG1pbnZmLnJ1bGUudHlwZSA9IGl0OwogICAgICAgIG1heHZmLnJ1bGUudHlwZSA9IGl0OwoKICAgICAgICBpZiAoaXQgPT09ICdkYXRlJykgewogICAgICAgICAgbWludmYuaGludCgnMjAxOC0xMS0xMicpOwogICAgICAgICAgbWF4dmYuaGludCgnMjAxOS0xMS0xMicpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBtaW52Zi5oaW50KCcxMCcpOwogICAgICAgICAgbWF4dmYuaGludCgnMTAwJyk7CiAgICAgICAgfQoKICAgICAgICBtaW52Zi5zaG93KCk7CiAgICAgICAgbWF4dmYuc2hvdygpOwogICAgICAgIHZmLmhpZGUoKTsKICAgICAgICBzdmYuaGlkZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIGlmIChpdCA9PT0gJ2xpc3QnKSB7CiAgICAgICAgICBzdmYuc2hvdygpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzdmYuaGlkZSgpOwogICAgICAgIH0KCiAgICAgICAgdmYuaGlkZSgpOwogICAgICAgIG9mLmhpZGUoKTsKICAgICAgICBtaW52Zi5oaWRlKCk7CiAgICAgICAgbWF4dmYuaGlkZSgpOwogICAgICB9CiAgICB9CiAgfSwgewogICAga2V5OiAiY3JpdGVyaWFPcGVyYXRvclNlbGVjdGVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBjcml0ZXJpYU9wZXJhdG9yU2VsZWN0ZWQoaXQpIHsKICAgICAgaWYgKCFpdCkgcmV0dXJuOwogICAgICB2YXIgbWludmYgPSB0aGlzLm1pbnZmLAogICAgICAgICAgbWF4dmYgPSB0aGlzLm1heHZmLAogICAgICAgICAgdmYgPSB0aGlzLnZmOwoKICAgICAgaWYgKGl0ID09PSAnYmUnIHx8IGl0ID09PSAnbmJlJykgewogICAgICAgIG1pbnZmLnNob3coKTsKICAgICAgICBtYXh2Zi5zaG93KCk7CiAgICAgICAgdmYuaGlkZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhciB0eXBlID0gdGhpcy5jZi52YWwoKTsKICAgICAgICB2Zi5ydWxlLnR5cGUgPSB0eXBlOwoKICAgICAgICBpZiAodHlwZSA9PT0gJ2RhdGUnKSB7CiAgICAgICAgICB2Zi5oaW50KCcyMDE4LTExLTEyJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZmLmhpbnQoJzEwJyk7CiAgICAgICAgfQoKICAgICAgICB2Zi5zaG93KCk7CiAgICAgICAgbWludmYuaGlkZSgpOwogICAgICAgIG1heHZmLmhpZGUoKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImJ0bkNsaWNrIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBidG5DbGljayhhY3Rpb24pIHsKICAgICAgaWYgKGFjdGlvbiA9PT0gJ2NhbmNlbCcpIHsKICAgICAgICB0aGlzLmhpZGUoKTsKICAgICAgfSBlbHNlIGlmIChhY3Rpb24gPT09ICdyZW1vdmUnKSB7CiAgICAgICAgdGhpcy5jaGFuZ2UoJ3JlbW92ZScpOwogICAgICAgIHRoaXMuaGlkZSgpOwogICAgICB9IGVsc2UgaWYgKGFjdGlvbiA9PT0gJ3NhdmUnKSB7CiAgICAgICAgLy8gdmFsaWRhdGUKICAgICAgICB2YXIgYXR0cnMgPSBbJ21mJywgJ3JmJywgJ2NmJywgJ29mJywgJ3N2ZicsICd2ZicsICdtaW52ZicsICdtYXh2ZiddOwoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGF0dHJzLmxlbmd0aDsgaSArPSAxKSB7CiAgICAgICAgICB2YXIgZmllbGQgPSB0aGlzW2F0dHJzW2ldXTsgLy8gY29uc29sZS5sb2coJ2ZpZWxkOicsIGZpZWxkKTsKCiAgICAgICAgICBpZiAoZmllbGQuaXNTaG93KCkpIHsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ2l0OicsIGl0KTsKICAgICAgICAgICAgaWYgKCFmaWVsZC52YWxpZGF0ZSgpKSByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICB2YXIgbW9kZSA9IHRoaXMubWYudmFsKCk7CiAgICAgICAgdmFyIHJlZiA9IHRoaXMucmYudmFsKCk7CiAgICAgICAgdmFyIHR5cGUgPSB0aGlzLmNmLnZhbCgpOwogICAgICAgIHZhciBvcGVyYXRvciA9IHRoaXMub2YudmFsKCk7CiAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5zdmYudmFsKCk7CgogICAgICAgIGlmICh0eXBlID09PSAnbnVtYmVyJyB8fCB0eXBlID09PSAnZGF0ZScpIHsKICAgICAgICAgIGlmIChvcGVyYXRvciA9PT0gJ2JlJyB8fCBvcGVyYXRvciA9PT0gJ25iZScpIHsKICAgICAgICAgICAgdmFsdWUgPSBbdGhpcy5taW52Zi52YWwoKSwgdGhpcy5tYXh2Zi52YWwoKV07CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YWx1ZSA9IHRoaXMudmYudmFsKCk7CiAgICAgICAgICB9CiAgICAgICAgfSAvLyBjb25zb2xlLmxvZyhtb2RlLCByZWYsIHR5cGUsIG9wZXJhdG9yLCB2YWx1ZSk7CgoKICAgICAgICB0aGlzLmNoYW5nZSgnc2F2ZScsIG1vZGUsIHJlZiwgewogICAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICAgIG9wZXJhdG9yOiBvcGVyYXRvciwKICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZSwKICAgICAgICAgIHZhbHVlOiB2YWx1ZQogICAgICAgIH0pOwogICAgICAgIHRoaXMuaGlkZSgpOwogICAgICB9CiAgICB9IC8vIHZhbGlkYXRpb246IHsgbW9kZSwgcmVmLCB2YWxpZGF0b3IgfQoKICB9LCB7CiAgICBrZXk6ICJzZXRWYWx1ZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0VmFsdWUodikgewogICAgICBpZiAodikgewogICAgICAgIHZhciBtZiA9IHRoaXMubWYsCiAgICAgICAgICAgIHJmID0gdGhpcy5yZiwKICAgICAgICAgICAgY2YgPSB0aGlzLmNmLAogICAgICAgICAgICBvZiA9IHRoaXMub2YsCiAgICAgICAgICAgIHN2ZiA9IHRoaXMuc3ZmLAogICAgICAgICAgICB2ZiA9IHRoaXMudmYsCiAgICAgICAgICAgIG1pbnZmID0gdGhpcy5taW52ZiwKICAgICAgICAgICAgbWF4dmYgPSB0aGlzLm1heHZmOwogICAgICAgIHZhciBtb2RlID0gdi5tb2RlLAogICAgICAgICAgICByZWYgPSB2LnJlZiwKICAgICAgICAgICAgdmFsaWRhdG9yID0gdi52YWxpZGF0b3I7CgogICAgICAgIHZhciBfcmVmID0gdmFsaWRhdG9yIHx8IHsKICAgICAgICAgIHR5cGU6ICdsaXN0JwogICAgICAgIH0sCiAgICAgICAgICAgIHR5cGUgPSBfcmVmLnR5cGUsCiAgICAgICAgICAgIG9wZXJhdG9yID0gX3JlZi5vcGVyYXRvciwKICAgICAgICAgICAgdmFsdWUgPSBfcmVmLnZhbHVlOwoKICAgICAgICBtZi52YWwobW9kZSB8fCAnY2VsbCcpOwogICAgICAgIHJmLnZhbChyZWYpOwogICAgICAgIGNmLnZhbCh0eXBlKTsKICAgICAgICBvZi52YWwob3BlcmF0b3IpOwoKICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHsKICAgICAgICAgIG1pbnZmLnZhbCh2YWx1ZVswXSk7CiAgICAgICAgICBtYXh2Zi52YWwodmFsdWVbMV0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzdmYudmFsKHZhbHVlIHx8ICcnKTsKICAgICAgICAgIHZmLnZhbCh2YWx1ZSB8fCAnJyk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmNyaXRlcmlhU2VsZWN0ZWQodHlwZSk7CiAgICAgICAgdGhpcy5jcml0ZXJpYU9wZXJhdG9yU2VsZWN0ZWQob3BlcmF0b3IpOwogICAgICB9CgogICAgICB0aGlzLnNob3coKTsKICAgIH0KICB9XSk7CgogIHJldHVybiBNb2RhbFZhbGlkYXRpb247Cn0oTW9kYWwpOwoKZXhwb3J0IHsgTW9kYWxWYWxpZGF0aW9uIGFzIGRlZmF1bHQgfTs="},{"version":3,"sources":["C:/Users/吴建明/Desktop/VisualizationExcle_Demo/src/components/x-spreadsheet/component/modal_validation.js"],"names":["Modal","FormInput","FormSelect","FormField","Button","t","h","cssPrefix","fieldLabelWidth","ModalValidation","mf","it","required","rf","pattern","cf","criteriaSelected","of","criteriaOperatorSelected","hide","minvf","maxvf","type","svf","vf","children","el","on","btnClick","change","hint","input","show","rule","val","action","attrs","i","length","field","isShow","validate","mode","ref","operator","value","v","validator","Array","isArray"],"mappings":"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","sourcesContent":["import Modal from './modal';\r\nimport FormInput from './form_input';\r\nimport FormSelect from './form_select';\r\nimport FormField from './form_field';\r\nimport Button from './button';\r\nimport { t } from '../locale/locale';\r\nimport { h } from './element';\r\nimport { cssPrefix } from '../config';\r\n\r\nconst fieldLabelWidth = 100;\r\n\r\nexport default class ModalValidation extends Modal {\r\n  constructor() {\r\n    const mf = new FormField(\r\n      new FormSelect('cell',\r\n        ['cell'], // cell|row|column\r\n        '100%',\r\n        it => t(`dataValidation.modeType.${it}`)),\r\n      { required: true },\r\n      `${t('dataValidation.range')}:`,\r\n      fieldLabelWidth,\r\n    );\r\n    const rf = new FormField(\r\n      new FormInput('120px', 'E3 or E3:F12'),\r\n      { required: true, pattern: /^([A-Z]{1,2}[1-9]\\d*)(:[A-Z]{1,2}[1-9]\\d*)?$/ },\r\n    );\r\n    const cf = new FormField(\r\n      new FormSelect('list',\r\n        ['list', 'number', 'date', 'phone', 'email'],\r\n        '100%',\r\n        it => t(`dataValidation.type.${it}`),\r\n        it => this.criteriaSelected(it)),\r\n      { required: true },\r\n      `${t('dataValidation.criteria')}:`,\r\n      fieldLabelWidth,\r\n    );\r\n\r\n    // operator\r\n    const of = new FormField(\r\n      new FormSelect('be',\r\n        ['be', 'nbe', 'eq', 'neq', 'lt', 'lte', 'gt', 'gte'],\r\n        '160px',\r\n        it => t(`dataValidation.operator.${it}`),\r\n        it => this.criteriaOperatorSelected(it)),\r\n      { required: true },\r\n    ).hide();\r\n    // min, max\r\n    const minvf = new FormField(\r\n      new FormInput('70px', '10'),\r\n      { required: true },\r\n    ).hide();\r\n    const maxvf = new FormField(\r\n      new FormInput('70px', '100'),\r\n      { required: true, type: 'number' },\r\n    ).hide();\r\n    // value\r\n    const svf = new FormField(\r\n      new FormInput('120px', 'a,b,c'),\r\n      { required: true },\r\n    );\r\n    const vf = new FormField(\r\n      new FormInput('70px', '10'),\r\n      { required: true, type: 'number' },\r\n    ).hide();\r\n\r\n    super(t('contextmenu.validation'), [\r\n      h('div', `${cssPrefix}-form-fields`).children(\r\n        mf.el,\r\n        rf.el,\r\n      ),\r\n      h('div', `${cssPrefix}-form-fields`).children(\r\n        cf.el,\r\n        of.el,\r\n        minvf.el,\r\n        maxvf.el,\r\n        vf.el,\r\n        svf.el,\r\n      ),\r\n      h('div', `${cssPrefix}-buttons`).children(\r\n        new Button('cancel').on('click', () => this.btnClick('cancel')),\r\n        new Button('remove').on('click', () => this.btnClick('remove')),\r\n        new Button('save', 'primary').on('click', () => this.btnClick('save')),\r\n      ),\r\n    ]);\r\n    this.mf = mf;\r\n    this.rf = rf;\r\n    this.cf = cf;\r\n    this.of = of;\r\n    this.minvf = minvf;\r\n    this.maxvf = maxvf;\r\n    this.vf = vf;\r\n    this.svf = svf;\r\n    this.change = () => {};\r\n  }\r\n\r\n  showVf(it) {\r\n    const hint = it === 'date' ? '2018-11-12' : '10';\r\n    const { vf } = this;\r\n    vf.input.hint(hint);\r\n    vf.show();\r\n  }\r\n\r\n  criteriaSelected(it) {\r\n    const {\r\n      of, minvf, maxvf, vf, svf,\r\n    } = this;\r\n    if (it === 'date' || it === 'number') {\r\n      of.show();\r\n      minvf.rule.type = it;\r\n      maxvf.rule.type = it;\r\n      if (it === 'date') {\r\n        minvf.hint('2018-11-12');\r\n        maxvf.hint('2019-11-12');\r\n      } else {\r\n        minvf.hint('10');\r\n        maxvf.hint('100');\r\n      }\r\n      minvf.show();\r\n      maxvf.show();\r\n      vf.hide();\r\n      svf.hide();\r\n    } else {\r\n      if (it === 'list') {\r\n        svf.show();\r\n      } else {\r\n        svf.hide();\r\n      }\r\n      vf.hide();\r\n      of.hide();\r\n      minvf.hide();\r\n      maxvf.hide();\r\n    }\r\n  }\r\n\r\n  criteriaOperatorSelected(it) {\r\n    if (!it) return;\r\n    const {\r\n      minvf, maxvf, vf,\r\n    } = this;\r\n    if (it === 'be' || it === 'nbe') {\r\n      minvf.show();\r\n      maxvf.show();\r\n      vf.hide();\r\n    } else {\r\n      const type = this.cf.val();\r\n      vf.rule.type = type;\r\n      if (type === 'date') {\r\n        vf.hint('2018-11-12');\r\n      } else {\r\n        vf.hint('10');\r\n      }\r\n      vf.show();\r\n      minvf.hide();\r\n      maxvf.hide();\r\n    }\r\n  }\r\n\r\n  btnClick(action) {\r\n    if (action === 'cancel') {\r\n      this.hide();\r\n    } else if (action === 'remove') {\r\n      this.change('remove');\r\n      this.hide();\r\n    } else if (action === 'save') {\r\n      // validate\r\n      const attrs = ['mf', 'rf', 'cf', 'of', 'svf', 'vf', 'minvf', 'maxvf'];\r\n      for (let i = 0; i < attrs.length; i += 1) {\r\n        const field = this[attrs[i]];\r\n        // console.log('field:', field);\r\n        if (field.isShow()) {\r\n          // console.log('it:', it);\r\n          if (!field.validate()) return;\r\n        }\r\n      }\r\n\r\n      const mode = this.mf.val();\r\n      const ref = this.rf.val();\r\n      const type = this.cf.val();\r\n      const operator = this.of.val();\r\n      let value = this.svf.val();\r\n      if (type === 'number' || type === 'date') {\r\n        if (operator === 'be' || operator === 'nbe') {\r\n          value = [this.minvf.val(), this.maxvf.val()];\r\n        } else {\r\n          value = this.vf.val();\r\n        }\r\n      }\r\n      // console.log(mode, ref, type, operator, value);\r\n      this.change('save',\r\n        mode,\r\n        ref,\r\n        {\r\n          type, operator, required: false, value,\r\n        });\r\n      this.hide();\r\n    }\r\n  }\r\n\r\n  // validation: { mode, ref, validator }\r\n  setValue(v) {\r\n    if (v) {\r\n      const {\r\n        mf, rf, cf, of, svf, vf, minvf, maxvf,\r\n      } = this;\r\n      const {\r\n        mode, ref, validator,\r\n      } = v;\r\n      const {\r\n        type, operator, value,\r\n      } = validator || { type: 'list' };\r\n      mf.val(mode || 'cell');\r\n      rf.val(ref);\r\n      cf.val(type);\r\n      of.val(operator);\r\n      if (Array.isArray(value)) {\r\n        minvf.val(value[0]);\r\n        maxvf.val(value[1]);\r\n      } else {\r\n        svf.val(value || '');\r\n        vf.val(value || '');\r\n      }\r\n      this.criteriaSelected(type);\r\n      this.criteriaOperatorSelected(operator);\r\n    }\r\n    this.show();\r\n  }\r\n}\r\n"]}]}